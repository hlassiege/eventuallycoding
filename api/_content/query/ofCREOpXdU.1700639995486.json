{"_path":"/articles/2011/02/02/java-vs-c-le-mot-cle-using-en-c-2","_dir":"02","_draft":false,"_partial":false,"_locale":"","title":"Java Vs C# : le mot clé using en C#","description":"**Warning, warning,** ceci n'est pas une rubrique...","id":"146","date":"2011-02-02","categories":["waza"],"tags":["csharp","java"],"cover":"javac1.png","readingTime":{"text":"2 min read","minutes":1.47,"time":88200,"words":294},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"/images/javac1.png","title":"javac"},"children":[]},{"type":"text","value":" "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Warning, warning,"}]},{"type":"text","value":" ceci n'est pas une rubrique à troll !!"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Bien qu'étant plutot spécialiste Java, je me suis mis récemment au C#. Loin des débats qui n'en finissent plus pour savoir lequel des deux p... le plus loin, je tenais à faire une petite rubrique pour lister \"les trucs qui tuent\" qui existent dans chaque langage et que tout bon développeur aime connaitre."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Et donc le truc qui tue du jour :"}]},{"type":"element","tag":"h3","props":{"id":"le-mot-clé-using-en-c"},"children":[{"type":"text","value":"le mot clé using en C#"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Je ne vous l'apprends pas (enfin j'espère) en Java et en C#, on a l'habitude d'utiliser des blocs finally pour fermer les ressources proprement en cas d'exception."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Par exemple :"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"InputStream   input = null;\ntry\n{\ninput = new FileInputStream(fileName);\n//...process input stream...\n}catch (IOException e)\n{\n// do something\n}\nfinally\n{\nif(input != null)\n{\ntry\n{\ninput.close();\n}\ncatch(IOException e)\n{\n}\n}\n}"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Verbeux n'est ce pas ?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"En C# le truc qui tue ? Pas besoin de bloc finally, la fermeture des ressources peut être faite automatiquement avec la syntaxe suivante :"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"using (System.IO.StreamReader sr = new System.IO.StreamReader(@\"C:UsersPublicDocumentstest.txt\"))\n{  �\nstring s = null;  �\nwhile((s = sr.ReadLine()) != null)  �\n{      �\nConsole.WriteLine(s);  �\n}\n}"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Le mot clé using permet de désigner les ressources à fermer à la fin du bloc. Ces ressources implémentent l'interface IDisposable."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Mais un peu d'espoir quand même pour les javaistes, "},{"type":"element","tag":"a","props":{"href":"http://blog.developpez.com/adiguba/p9231/java/try-with-resources/#more9231","rel":["nofollow"]},"children":[{"type":"text","value":"la fonctionnalité est prévue pour JDK7"}]},{"type":"text","value":" avec les blocs ARM :"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"public void copy(String sourceFile, String destFile) throws IOException\n{\ntry (InputStream input = new FileInputStream(sourceFile); OutputStream output = new FileOutputStream(destFile) )\n{\nbyte[] buf = new byte[8192];\nint len;\nwhile ( (len=input.read(buf)) >= 0 )\n{\noutput.write(buf, 0, len);\n}\n}\n}"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"En plus j'apprécie qu'ils aient réutilisé le mot clé try pour les gérer, ca porte moins à confusion que using en C# qui est déjà utilisé pour les imports."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"le-mot-clé-using-en-c","depth":3,"text":"le mot clé using en C#"}]}},"_type":"markdown","_id":"content:articles:2011:02:02:java-vs-c-le-mot-cle-using-en-c-2.md","_source":"content","_file":"articles/2011/02/02/java-vs-c-le-mot-cle-using-en-c-2.md","_extension":"md"}