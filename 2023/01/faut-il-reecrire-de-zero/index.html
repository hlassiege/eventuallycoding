<!DOCTYPE html>
<html lang="fr">
<head><meta charset="utf-8">
<title>Et s'il &#233;tait temps de tout r&#233;&#233;crire ? | EventuallyCoding</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://digianalytics.fr/pixel/73jqBv5FmFIZiWt2" defer="" type="text/javascript"></script>
<meta name="description" content="Une réécriture, c'est souvent l'aboutissement d'une dette technique trop lourde à rembourser, un aveu d'échec par rapport à une application qu'on ne parvient plus à faire évoluer, le cout et les risques étant trop importants. Mais si les évènements qui amènent à tout réécrire sont déjà en soit un problème, la réécriture elle-même est un piège qui peut tuer un produit.">
<meta name="og:description" content="Une réécriture, c'est souvent l'aboutissement d'une dette technique trop lourde à rembourser, un aveu d'échec par rapport à une application qu'on ne parvient plus à faire évoluer, le cout et les risques étant trop importants. Mais si les évènements qui amènent à tout réécrire sont déjà en soit un problème, la réécriture elle-même est un piège qui peut tuer un produit.">
<meta name="og:type" content="article">
<meta name="og:title" content="Et s'il était temps de tout réécrire ?">
<meta name="og:url" content="https://eventuallycoding.com/2023/01/faut-il-reecrire-de-zero">
<meta name="og:image" content="https://eventuallycoding.com/images/covers/itsatrap.jpg">
<meta name="og:image:alt" content="Et s'il était temps de tout réécrire ?">
<meta name="twitter:text:title" content="Et s'il était temps de tout réécrire ?">
<meta name="twitter:image" content="https://eventuallycoding.com/images/covers/itsatrap.jpg">
<meta name="twitter:card" content="summary">
<meta name="article:published_time" content="2023-01-02T00:00:00.000Z">
<meta name="article:article:modified_time" content="2023-01-02T00:00:00.000Z">
<meta name="article:article:tag" content="rewrite,refactoring,malt">
<link rel="canonical" href="https://eventuallycoding.com/2023/01/faut-il-reecrire-de-zero">
<link rel="alternate" href="https://eventuallycoding.com/2023/01/faut-il-reecrire-de-zero" hreflang="fr"><link rel="modulepreload" href="/2023/01/faut-il-reecrire-de-zero/_payload.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.4e8e9ab9.js"><link rel="preload" as="style" href="/_nuxt/entry.b1b3c88d.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/default.743f7445.js"><link rel="preload" as="style" href="/_nuxt/TheHeader.e21518f4.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/nuxt-link.e9d75e63.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/siteMetaData.b74feb44.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_id_.4a64e0b1.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dropdown.15ce24da.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_commonjsHelpers.28e086c5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.3100fbb0.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.4cbb432c.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.a6ef77ff.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/query.45aca0d8.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.61d74bb5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/utils.b17ecf85.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/composables.c57ce97e.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.497c769a.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseA.ae2ece81.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH2.d151cff5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Image.548eb1bf.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseImg.792b26d4.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseUl.4aa2bcf5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseLi.be1ca92a.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseStrong.b91d9720.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseOl.db9c3fe8.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/error-component.debf2df0.js"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/github_new.4e3fe23c.svg"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/rss.9e0b880c.svg"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/mastodon.f0ecdde8.svg"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/linkeding.34c3bc6d.svg"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/twitter.457cff27.svg"><link rel="stylesheet" href="/_nuxt/entry.b1b3c88d.css"><link rel="stylesheet" href="/_nuxt/TheHeader.e21518f4.css"><style>.inverted[data-v-a060ef80]{--tw-bg-opacity:1;background-color:rgb(248 250 252/var(--tw-bg-opacity))}.inverted .font-to-invert-to-pink[data-v-a060ef80]{color:rgb(236 72 153/var(--tw-text-opacity))}.inverted .font-to-invert-to-black[data-v-a060ef80],.inverted .font-to-invert-to-pink[data-v-a060ef80]{--tw-text-opacity:1;transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.inverted .font-to-invert-to-black[data-v-a060ef80]{color:rgb(51 65 85/var(--tw-text-opacity))}.inverted .font-to-invert-to-black[data-v-a060ef80]:hover{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.link[data-v-a060ef80]{display:block;font-size:1rem;font-weight:500;line-height:1.5rem;overflow:hidden;padding-left:.75rem;padding-right:.75rem;position:relative;text-decoration:none}.link.NuxtLink-exact-active[data-v-a060ef80]:after{bottom:-2px;height:100%;left:0;width:100%}.link[data-v-a060ef80]:after{background:rgba(236,64,122,.25);bottom:-6px;content:"";height:calc(100% - 8px);left:18px;position:absolute;transition:.35s cubic-bezier(.25,.1,0,2.05);width:calc(100% - 8px);z-index:-1}.link[data-v-a060ef80]:hover:after{bottom:-2px;height:100%;left:0;width:100%}</style><style>.nuxt-content h2{font-size:28px;font-weight:700}.nuxt-content h3{font-size:22px;font-weight:700}.nuxt-content p{margin-bottom:20px}</style></head>
<body ><div id="__nuxt"><!--[--><section class="w-full pb-12 antialiased"><div class="mx-auto max-w-8xl"><div data-v-a060ef80><nav id="header-menu" class="transition-colors fixed w-full z-10 top-0 inverted" data-v-a060ef80><div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8" data-v-a060ef80><div class="relative flex items-center justify-between h-16" data-v-a060ef80><div class="absolute inset-y-0 left-0 flex items-center sm:hidden" data-v-a060ef80><button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white" aria-controls="mobile-menu" aria-expanded="false" data-v-a060ef80><span class="sr-only" data-v-a060ef80>Open main menu</span><svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" data-v-a060ef80><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" data-v-a060ef80></path></svg><svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" data-v-a060ef80><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" data-v-a060ef80></path></svg></button></div><div class="flex-1 flex items-center justify-center sm:items-stretch sm:justify-start" data-v-a060ef80><div class="flex-shrink-0 flex items-center" data-v-a060ef80><span class="text-white text-base font-medium font-bruno text-2xl font-to-invert-to-pink" data-v-a060ef80><a href="/" class="" data-v-a060ef80>EventuallyCoding.com</a></span></div><div class="hidden sm:block sm:ml-6 absolute right-0 font-mark" data-v-a060ef80><div class="flex space-x-4" data-v-a060ef80><!--[--><a href="/speaking" class="link text-white font-to-invert-to-black" data-v-a060ef80>Speaking</a><a href="/blog" class="link text-white font-to-invert-to-black" data-v-a060ef80>Writing</a><a href="/resources" class="link text-white font-to-invert-to-black" data-v-a060ef80>Resources</a><a href="/about" class="link text-white font-to-invert-to-black" data-v-a060ef80>About</a><!--]--></div></div></div></div></div><div class="hidden" data-v-a060ef80><div class="px-2 pt-2 pb-3 space-y-1" data-v-a060ef80><!--[--><a href="/speaking" class="text-white hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium font-to-invert-to-black" data-v-a060ef80>Speaking</a><a href="/blog" class="text-white hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium font-to-invert-to-black" data-v-a060ef80>Writing</a><a href="/resources" class="text-white hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium font-to-invert-to-black" data-v-a060ef80>Resources</a><a href="/about" class="text-white hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium font-to-invert-to-black" data-v-a060ef80>About</a><!--]--></div></div></nav></div><!--[--><!--[--><div><div class="flex justify-center mt-24"><img src="/images/covers/itsatrap.jpg" alt="Et s&#39;il était temps de tout réécrire ?" class="object-cover w-96"></div><div class="px-4 mx-auto sm:px-6 xl:max-w-7xl xl:px-0 mt-10"><div><h1 class="text-4xl text-gray-700 font-extrabold text-center mb-3">Et s&#39;il était temps de tout réécrire ?</h1><p class="text-slate-400 text-center mb-1"><!----></p><div class="grid grid-cols-3 text-center sm:w-full md:w-1/2 mx-auto"><div><p class="text-center font-bold my-4 text-slate-400 text-xs"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> January 2, 2023</p></div><div><p class="text-center font-bold my-4 text-slate-400 text-xs"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> 9 min read</p></div><div class="flex items-center font-medium sm:mx-3 justify-center"><img src="/hugo-nb.jpg" loading="lazy" alt="" class="mr-3 w-10 h-10 rounded-full bg-slate-50 dark:bg-slate-800"><div><div class="font-bold text-slate-400 text-xs">Hugo Lassiège</div><a target="_blank" href="https://twitter.com/hugolassiege" class="font-bold text-sky-400 text-xs hover:text-sky-600"> @hugolassiege</a></div></div></div></div><div class="text-left mx-auto"><div class="flex flex-wrap lg:flex-row-reverse py-12"><div class="w-full lg:w-1/4 px-5"><div class="lg:sticky top-0 pt-5 -mt-5 font-proxima"><div class="toc hidden lg:block"><p class="border-b-4 pb-3 mb-3 border-gray-200 text-xl"> On this page </p><ul class="pl-0"><!--[--><li class="py-1"><a class="hover:text-smalt-blue-700" href="#un-petit-peu-dhistoire">Un petit peu d&#39;histoire</a></li><li class="py-1"><a class="hover:text-smalt-blue-700" href="#quest-ce-que-la-dette-technique">Qu&#39;est ce que la dette technique ?</a></li><li class="py-1"><a class="hover:text-smalt-blue-700" href="#constat-sur-malt">Constat sur Malt</a></li><li class="py-1"><a class="hover:text-smalt-blue-700" href="#kiss">KISS</a></li><li class="py-1"><a class="hover:text-smalt-blue-700" href="#footnote-label">Footnotes</a></li><!--]--></ul></div><div class="text-right mb-12"><div class="relative inline-block text-left ml-2 block lg:hidden"><div><span class="rounded-md shadow-sm"><button type="button" class="inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-sm leading-5 font-medium text-black hover:text-white hover:bg-smalt-blue-500 focus:outline-none transition ease-in-out duration-150" aria-haspopup="true" aria-expanded="true"><!--[-->On this page<!--]--><svg class="-mr-1 ml-2 h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></span></div><!----></div></div></div></div><div class="lg:w-3/4 w-full px-5 max-w-none centered-image"><div id="nuxtContent" class="prose font-proxima text-sm md:text-xl font-medium min-w-full md:p-10 mx-auto"><p><!--[-->Ce titre sonne comme un message d&#39;avertissement n&#39;est-ce pas ? Je suis plutôt très frileux quand il s&#39;agit de tout réécrire en partant de zéro et je rejoins l&#39;avis de Joel Spolsky qui en parlait comme <a href="https://www.joelonsoftware.com/2000/04/06/things-you-should-never-do-part-i/" rel="nofollow"><!--[-->l&#39;une des plus grosses erreurs à faire<!--]--></a>.<!--]--></p><p><!--[-->Une réécriture, c&#39;est souvent l&#39;aboutissement d&#39;une dette technique trop lourde à rembourser, un aveu d&#39;échec par rapport à une application qu&#39;on ne parvient plus à faire évoluer, le coût et les risques étant trop importants. Mais si les évènements qui amènent à tout réécrire sont déjà en soit un problème, la réécriture elle-même est un piège qui peut tuer un produit.<br>
Les exemples sont légions. De nombreuse entreprise ont perdu des années à réécrire un produit puis mis la clé sous la porte quand le marché ne les a pas attendus.<!--]--></p><p><!--[-->Mais pourquoi je vous parle de tout ça ? Est-ce que Malt est dans une situation aussi catastrophique qu&#39;il est nécessaire de tout refaire ?
Eh bien, c&#39;est ce que je vous propose de voir dans ce billet. On va parler de l&#39;évolution de la stack technique de Malt depuis 2012, de gestion de la dette et de comment nous envisageons de rembourser notre dette de façon itérative par composants.<!--]--></p><h2 id="un-petit-peu-dhistoire"><a href="#un-petit-peu-dhistoire"><!--[-->Un petit peu d&#39;histoire<!--]--></a></h2><p><!--[-->La première version de Malt date de 2012. C&#39;était à ce moment-là une application monolithique Java/Spring boot, qui tournait sur un PAAS (Heroku) avec une base de données mongo et un moteur de recherche Elasticsearch.
Le frontend était majoritairement en vanilla JS avec quelques touches de AngularJS.
On utilisait des JSP comme moteur de templating, choix plutôt bon à ce moment précis.<!--]--></p><div class="flex justify-center"><!--[--><p><!--[--><img src="/images/stack-2012.jpg" alt="Stack 2012"><!--]--></p><!--]--></div><p><!--[-->En 2014 l&#39;application s&#39;est étoffé. J&#39;ai pu passer à temps plein suite à une levée de fonds. Nous sommes 2 cofondateurs sur 3 à avoir une casquette technique et travailler sur le site.
Entre temps on a introduit Redis pour la gestion des sessions et du cache et RabbitMQ pour introduire du découplage entre certaines parties fonctionnelles via un pattern observer.<!--]--></p><p><!--[-->On se marche un tout petit peu dessus de temps en temps et on conclut que ce serait intéressant de pouvoir sortir des parties du site indépendamment. Cela permettait par exemple de sortir le moteur de recherche tandis qu&#39;on continuerait à avoir le moteur de paiement en brouillon.
En plus de cela, le cout du service Heroku et de ces addons (mongo et Redis), la robustesse de certains services en SAAS (Elastic notamment) font que l&#39;alternative SAAS/PAAS commence à être moins pertinente.<!--]--></p><p><!--[-->On décide donc de séparer l&#39;application en plusieurs petites applications, de rajouter un reverse proxy Nginx devant et de tout faire tourner sur des serveurs dédiés OVH.<!--]--></p><p><!--[-->Même rétrospectivement, il est difficile de juger l&#39;ensemble de ces décisions.
La séparation en plusieurs applications était discutable à ce stade. D&#39;autant que nous utilisions déjà une stratégie de feature flipping pour désactiver des parties de code.
Mais la migration sur OVH, notamment pour des raisons de coût des addons était plutôt pragmatique et nous a apporté beaucoup de souplesse pour la suite.<!--]--></p><p><!--[-->Si cette partie vous intéresse, <a href="https://eventuallycoding.com/2014/05/09/paas-or-not-paas-that-is-the-question/" rel="nofollow"><!--[-->un billet de blog sur la migration vers OVH avait été écrit à l&#39;époque<!--]--></a>.<!--]--></p><p><!--[-->Pour l&#39;anecdote, l&#39;ensemble de l&#39;application et des bases de données tournait sur une seule machine !<!--]--></p><div class="flex justify-center"><!--[--><p><!--[--><img src="/images/stack-2014.jpg" alt="Stack 2014"><!--]--></p><!--]--></div><p><!--[-->Entre 2014 et 2018, l&#39;équipe Produit s&#39;est étoffée jusqu&#39;à 30 personnes. L&#39;architecture s&#39;est complexifiée pour répondre à des besoins plus forts en termes de résilience, sécurité, scalabilité.
Nous sommes notamment passés en partie sur OVH Cloud. Ça a été l&#39;occasion d&#39;introduire Terraform. Consul a été introduit pour la découvrabilité des services.
Vault a été ajouté pour la gestion des clés privée. Postgresql a été introduit en 2019 suite à de nombreuses déconvenues avec Mongo.<!--]--></p><p><!--[-->Côté frontend on a introduit Vue.js et supprimé AngularJs (EDIT : en fait, apparemment pas partout). Nos modules en Vanilla JS se sont structurés pour donner lieu à un petit framework maison assez léger. Handlebars nous a permis de partager des templates de pages entre client et serveurs et donc résoudre quelques soucis de SEO.<!--]--></p><div class="flex justify-center"><!--[--><p><!--[--><img src="/images/stack-2018.jpg" alt="Stack 2019"><!--]--></p><!--]--></div><p><!--[-->Suite à 2018, nous avons rencontré de nombreuses limitations sur le cloud OVH. A l&#39;époque leur implémentation de l&#39;api OpenStack n&#39;était pas stable et nous rencontrions de nombreuses erreurs 500. Le manque de services inclus nous imposait de reconstruire des solutions, sans que ce soit notre cœur de métier (la gestion des clés privée, la gestion des logs, la réplication mongo vers PG ou la création d&#39;un datawarehouse par exemple).
Nous avons donc décidé d&#39;aller sur GCP en 2019 pour bénéficier de services plus packagés. Plus exactement nous tournons désormais sur GKE (Kubernetes managé). Traefik a définitivement remplacé Nginx en tant que reverse proxy grâce à son intégration native avec Docker/Kube.<!--]--></p><div class="flex justify-center"><!--[--><p><!--[--><img src="/images/stack-2019.jpg" alt="Stack 2019"><!--]--></p><!--]--></div><h2 id="quest-ce-que-la-dette-technique"><a href="#quest-ce-que-la-dette-technique"><!--[-->Qu&#39;est ce que la dette technique ?<!--]--></a></h2><p><!--[-->Mis bout à bout, chaque décision décrite précédemment s&#39;explique. Elles ont toutes permis de construire la plateforme Malt que l&#39;on connaît aujourd&#39;hui et je les valide donc à posteriori. Refaire l&#39;histoire ne préjuge pas que nous serions arrivés au même résultat.<br>
Mais si ces décisions sont bonnes, pourquoi parler de dette technique ?<!--]--></p><p><!--[-->Eh bien parce que la dette, ce n&#39;est pas uniquement lié au code de mauvaise qualité.<!--]--></p><p><!--[-->Déjà posons une définition simple, la dette technique, c&#39;est la somme des choix visant à gagner du temps mais qui vont induire des couts futurs à rembourser.
Pour simplifier, la dette permet d&#39;acheter du temps qu&#39;il faudra rembourser par la suite.<!--]--></p><p><!--[-->J&#39;aime beaucoup l&#39;analogie avec la dette financière car :<!--]--></p><ul><!--[--><li><!--[-->la dette n&#39;est pas toujours négative, elle peut servir à aller vite à un instant T, c&#39;est de l&#39;investissement. Dans le cas idéal, on peut le rembourser quand on a obtenu les moyens pour le faire.<!--]--></li><li><!--[-->une dette se rembourse avec des intérêts, ces intérêts se cumulent dans le temps, c&#39;est le principe des intérêts composés<!--]--></li><li><!--[-->lorsqu&#39;on ne peut plus rembourser, on fait défaut sur une dette. Ce défaut se traduit par une réécriture complète de l&#39;application avec le cout associé. Dans le pire des cas, c&#39;est la fin du produit et de l&#39;entreprise.<!--]--></li><li><!--[-->la dette technique est soumise à l&#39;inflation et la déflation. Des évènements extérieurs peuvent la faire exploser (ou annuler). Elle n&#39;est donc pas totalement prédictible<!--]--></li><!--]--></ul><p><!--[-->Concernant le dernier point, la dette peut évoluer pour des raisons externes or c&#39;est justement un point important pour répondre à la question initiale.
Les choix effectués sur Malt ont tous été fait en fonction d&#39;un contexte donné.<!--]--></p><p><!--[-->Mais :<!--]--></p><ul><!--[--><li><!--[-->les contraintes ayant mené à certains choix ont évolué. Par exemple des technologies inexistantes en 2012 sont désormais standard (la gestion du SSR pour les applis frontends par exemple)<!--]--></li><li><!--[-->la taille de l&#39;équipe entraine des contraintes supplémentaires sur les standards de développement<!--]--></li><li><!--[-->la taille de l&#39;entreprise et de la base utilisateur entraine des contraintes supplémentaires sur les technologies à mettre en œuvre (Exemple, un batch qui prend 10minutes sur une faible volumétrie et qui prend 2h aujourd&#39;hui)<!--]--></li><!--]--></ul><p><!--[-->etc...<!--]--></p><p><!--[-->Bref, certains choix qui ne sont pas vus initialement comme de la dette peuvent en devenir par la suite.<!--]--></p><p><!--[-->Attention, je ne suis pas en train de dire qu&#39;il faut anticiper les contraintes futures. Pour beaucoup d&#39;entre elles je préconise d&#39;attendre jusqu&#39;au dernier moment car leur résolution induit souvent une complexité supplémentaire qui a aussi un cout et qui grève la vélocité d&#39;équipe.<!--]--></p><h2 id="constat-sur-malt"><a href="#constat-sur-malt"><!--[-->Constat sur Malt<!--]--></a></h2><p><!--[-->Sur Malt nous avons toujours eu un principe fort d&#39;autonomie.
Chaque personne est encouragée à avoir un regard critique, pour proposer et améliorer la stack technologique. Ces choix sont discutés, adoptés ou rejetés collégialement.<!--]--></p><p><!--[-->Cette approche participative nous a été très utile. Les choix ont toujours été très efficaces, innovants tout en restant pragmatiques.<!--]--></p><p><!--[-->Par exemple nous avons :<!--]--></p><ul><!--[--><li><!--[--><a href="https://eventuallycoding.com/2019/07/03/mongodb-vers-postgresql" rel="nofollow"><!--[-->introduit PGSQL pour remplacer progressivement Mongo<!--]--></a><!--]--></li><li><!--[-->basculé progressivement de Java à Kotlin<!--]--></li><li><!--[-->basculé progressivement de Javascript à Typescript<!--]--></li><!--]--></ul><p><!--[-->Mais, dans notre approche, nous avons aussi souvent décidé de faire ces ajouts de façon progressive sur le nouveau code, sans effectuer de migration complète de l&#39;ancien code.
C&#39;était un choix logique à ce moment-là, mais qui a creusé notre dette technique.<!--]--></p><p><!--[-->Ce choix a une conséquence forte : l&#39;explosion des dépendances.<br>
Et ces dépendances ont des impacts importants<!--]--></p><ul><!--[--><li><!--[-->sur la charge cognitive de chaque développeur qui tombe régulièrement sur des façons différentes de travailler<!--]--></li><li><!--[-->sur les temps de démarrage des applications qui chargent de nombreuses dépendances<!--]--></li><li><!--[-->sur les stations de travail qui sont doivent faire tourner une stack de plus en plus complexe<!--]--></li><li><!--[-->sur intellij qui galère de façon significative. Pas uniquement parce que la base de code est importante, mais aussi parce qu&#39;il a de nombreuses librairies et langages à analyser. Et chaque plugin coute !<sup><a aria-current="page" href="/2023/01/faut-il-reecrire-de-zero#user-content-fn-1" class="router-link-active router-link-exact-active" aria-describedby="footnote-label" data-footnote-ref="true" id="user-content-fnref-1"><!--[-->1<!--]--></a></sup><!--]--></li><!--]--></ul><p><!--[-->Nous avons de nombreuses métriques que l&#39;on regarde constamment, sur nos temps de builds, taux de disponibilité et j&#39;en passe. Mais pour certaines, l&#39;évolution s&#39;est faite progressivement dans le temps, ce qui n&#39;attire pas l&#39;attention.<br>
Par exemple<!--]--></p><ul><!--[--><li><!--[-->le temps de démarrage d&#39;une appli est désormais supérieur à 50secondes sur certains postes de travail<!--]--></li><li><!--[-->les stations de dev nécessitent une configuration très lourde pour faire tourner l&#39;ensemble de la stack (imaginez docker avec des containers ES, Redis, Mongo, PgSQL, Traefik etc...).<!--]--></li><li><!--[-->les indexations intellij qui peuvent durer des heures avec une empreinte mémoire &gt; 8Go dans les dernières versions<!--]--></li><!--]--></ul><p><!--[-->Et tout cela entraîne une augmentation importante des temps de cycle de développement.<!--]--></p><p><!--[-->Malgré tout, jusqu&#39;ici tout va encore bien.<!--]--></p><div class="flex justify-center"><!--[--><p><!--[--><img src="/images/thisisfine.jpg" alt="This is fine"><!--]--></p><!--]--></div><p><!--[-->Mais nous savons par expérience que nous sommes arrivés au moment où, si nous ne prenons pas d&#39;actions fortes, dans un an nous devrons faire un défaut partiel de notre dette, qui se traduirait par un freeze code de plusieurs mois pour rembourser.<!--]--></p><p><!--[-->Et ça, c&#39;est ce qu&#39;il faut éviter à tout prix.<!--]--></p><h2 id="kiss"><a href="#kiss"><!--[-->KISS<!--]--></a></h2><p><!--[-->En 2022, parmi nos 5 OKR d&#39;entreprise, nous avions un OKR un peu particulier : KISS, Keep it simple stupid.<!--]--></p><p><!--[-->Cet enjeu de simplification rejoint totalement le sujet développé dans le chapitre précédent. Il faut simplifier pour diminuer la <strong><!--[-->charge cognitive par développeur<!--]--></strong> et <strong><!--[-->la charge induite sur nos outils<!--]--></strong>.<!--]--></p><p><!--[-->Pour faire le lien avec l&#39;introduction de ce billet, nous n&#39;allons pas réécrire tout Malt de zéro bien évidemment. Mais nous allons travailler à simplifier Malt à travers plusieurs projets.<!--]--></p><p><!--[-->Et c&#39;est l&#39;un de ces projets dont je souhaite parler prochainement, la modernisation complète de notre stack frontend, comment passer de 6 technos frontend à uniquement une seule, et comment se débarrasser totalement de Java côté frontend (les fameuses JSP).<br>
De façon un peu poétique, ce projet s&#39;intitule Singapore car c&#39;est l&#39;histoire d&#39;un voyage en dehors de l&#39;île de Java.<!--]--></p><p><!--[-->Restez à l&#39;écoute, ce sera le sujet du prochain billet.<!--]--></p><section class="footnotes" data-footnotes="true"><h2 id="footnote-label" class="sr-only"><a href="#footnote-label"><!--[-->Footnotes<!--]--></a></h2><ol><!--[--><li id="user-content-fn-1"><!--[-->Un exemple simple pour comprendre. Nous avons aujourd&#39;hui 3 façons différentes d&#39;interagir avec PgSQL en Java : mybatis, Jooq, Spring Template. La grande majorité utilise Jooq mais Intellij doit mobiliser 3 plugins pour analyser, proposer de l&#39;auto complétion etc... (Même si le plugin Spring est de toute façon actif par défaut) <a aria-current="page" href="/2023/01/faut-il-reecrire-de-zero#user-content-fnref-1" class="router-link-active router-link-exact-active data-footnote-backref" aria-label="Back to content" data-footnote-backref="true"><!--[-->↩<!--]--></a><!--]--></li><!--]--></ol></section></div></div></div></div><div class="mt-10 text-slate-600 font-extrabold text-sm font-medium min-w-full mx-auto mb-2"><a href="https://github.com/hlassiege/eventuallycoding/blob/master/content/articles/2023/01/faut-il-reecrire-de-zero.md" rel="noopener noreferrer" target="_blank">Edit on Github <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 inline-block text-slate-600 -mt-1" viewBox="0 0 512 512"><path d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h82.7L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32H320zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"></path></svg></a></div><hr class="mb-8"><div><span class="font-proxima text-sm md:text-xl font-medium"> Did you like this blog post? </span><div class="mt-4 flex flex-row"><div><a href="https://facebook.com/sharer/sharer.php?u=https://eventuallycoding.com/2023/01/faut-il-reecrire-de-zero" target="_blank" rel="noopener" aria-label="Share on Facebook"><button aria-label="Share on Facebook" type="button" class="text-white bg-[#3b5998] hover:bg-[#3b5998]/90 focus:ring-4 focus:outline-none focus:ring-[#3b5998]/50 font-medium rounded-lg text-sm px-3 py-3 text-center inline-flex items-center dark:focus:ring-[#3b5998]/55 mr-2 mb-2"><svg class="w-6 h-6" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-f" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M279.1 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.4 0 225.4 0c-73.22 0-121.1 44.38-121.1 124.7v70.62H22.89V288h81.39v224h100.2V288z"></path></svg></button></a></div><div><a href="https://twitter.com/share?url=https://eventuallycoding.com/2023/01/faut-il-reecrire-de-zero&amp;text=Et s&#39;il était temps de tout réécrire ?&amp;via=hugolassiege" target="_blank" title="Share on Twitter" rel="noopener noreferrer" aria-label="Share on Twitter"><button aria-label="Share on Twitter" type="button" class="text-white bg-[#1da1f2] hover:bg-[#1da1f2]/90 focus:ring-4 focus:outline-none focus:ring-[#1da1f2]/50 font-medium rounded-lg text-sm px-3 py-3 text-center inline-flex items-center dark:focus:ring-[#1da1f2]/55 mr-2 mb-2"><svg class="w-6 h-6" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"></path></svg></button></a></div><div class=""><a href="https://www.buymeacoffee.com/hlassiege" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-red.png" alt="Buy Me A Coffee" style="height:48px !important;width:209px !important;"></a></div></div></div><div id="hyvor-talk-view"></div></div></div><!--]--><!--]--><footer class="lg:mt-40 border-t border-t-2"><div class="flex flex-col items-center mt-16"><div class="flex mb-3 space-x-4"><a aria-label="Open RSS feed" target="_self" href="/rss.xml" class="text-sm text-gray-500 transition hover:text-gray-600"><img alt="RSS" class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/rss.9e0b880c.svg"></a><a aria-label="Open Mastodon profile" class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="me" href="https://piaille.fr/@hugolassiege"><span class="sr-only">Mastodon</span><img alt="Mastodon" class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/mastodon.f0ecdde8.svg"></a><a aria-label="Open github profile" class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="nofollow noopener noreferrer" href="https://github.com/hlassiege"><span class="sr-only">github</span><img alt="github" class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/github_new.4e3fe23c.svg"></a><a aria-label="Open linkedin profile" class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/hugolassiege/"><span class="sr-only">Linkedin</span><img alt="Linkedin" class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/linkeding.34c3bc6d.svg"></a><a aria-label="Open twitter profile" target="_blank" rel="nofollow noopener noreferrer" href="https://twitter.com/hugolassiege" class="text-sm text-gray-500 transition hover:text-gray-600"><img alt="Twitter" class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/twitter.457cff27.svg"></a></div><div class="flex mb-2 space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Copyright © 2023</div><div>•</div> EventuallyCoding - A la fin de l&#39;envoi, je code !</div><div class="text-sm text-gray-500"> Credits to www.freepik.com - <a href="https://www.freepik.com/vectors/citizen">Citizen vector created by freepik - </a><a href="https://www.freepik.com/vectors/css">Css vector created by vectorjuice</a></div></div></footer></div></section><!--]--></div><script type="module">import p from "/2023/01/faut-il-reecrire-de-zero/_payload.js";window.__NUXT__={...p,...((function(a,b){return {state:{},_errors:{},serverRendered:true,config:{public:{content:{locales:[],defaultLocale:b,integrity:1698391215358,experimental:{stripQueryParameters:a,clientDB:a},api:{baseURL:"\u002Fapi\u002F_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:a,wsUrl:b,documentDriven:a,host:b,trailingSlash:a,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"\u002F",buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:b}},prerenderedAt:1698391264569}}(false,"")))}</script><script type="module" src="/_nuxt/entry.4e8e9ab9.js" crossorigin></script><script type="module" src="/_nuxt/default.743f7445.js" crossorigin></script><script type="module" src="/_nuxt/_id_.4a64e0b1.js" crossorigin></script><script type="module" src="/_nuxt/ContentRenderer.3100fbb0.js" crossorigin></script><script type="module" src="/_nuxt/ContentRendererMarkdown.4cbb432c.js" crossorigin></script><script type="module" src="/_nuxt/ProseP.497c769a.js" crossorigin></script><script type="module" src="/_nuxt/ProseA.ae2ece81.js" crossorigin></script><script type="module" src="/_nuxt/ProseH2.d151cff5.js" crossorigin></script><script type="module" src="/_nuxt/Image.548eb1bf.js" crossorigin></script><script type="module" src="/_nuxt/ProseImg.792b26d4.js" crossorigin></script><script type="module" src="/_nuxt/ProseUl.4aa2bcf5.js" crossorigin></script><script type="module" src="/_nuxt/ProseLi.be1ca92a.js" crossorigin></script><script type="module" src="/_nuxt/ProseStrong.b91d9720.js" crossorigin></script><script type="module" src="/_nuxt/ProseOl.db9c3fe8.js" crossorigin></script></body>
</html>