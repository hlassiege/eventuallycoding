__NUXT_JSONP__("/2012/11/11/nosql-4-bases-a-la-loupe-44", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S){return {data:[{article:{slug:"nosql-4-bases-a-la-loupe-44",description:y,id:"680",title:"Nosql, 4 bases à la loupe 4\u002F4",date:z,categories:["waza"],tags:[A,r,"redis",B],img:C,cover:"cover4.jpg",toc:[],body:{type:"root",children:[{type:b,tag:f,props:{},children:[{type:b,tag:h,props:{href:"http:\u002F\u002Fhakanai.free.fr\u002Findex.php\u002Fnosql-4-bases-a-la-loupe-14\u002Fnosql-logo\u002F",rel:[i,j,k],target:l},children:[{type:b,tag:s,props:{alt:t,src:"\u002Fimages\u002Fnosql-logo.gif",title:"nosql-logo"},children:[]}]},{type:a,value:"Vous vous rappelez du bouquin "},{type:b,tag:h,props:{href:"http:\u002F\u002Fpragprog.com\u002Fbook\u002Frwdata\u002Fseven-databases-in-seven-weeks",rel:[i,j,k],target:l},children:[{type:a,value:"7 databases in seven weeks"}]},{type:a,value:" ? Pour le coup j'ai eu l'occasion de réaliser une expérience un peu moins ambitieuse, seulement 4 bases de données. Et si je n'ai pas été aussi loin que le bouquin précédent je vous propose quand même un retour d'expérience sur :"}]},{type:a,value:d},{type:b,tag:D,props:{},children:[{type:a,value:d},{type:b,tag:m,props:{},children:[{type:a,value:"Redis"}]},{type:a,value:d},{type:b,tag:m,props:{},children:[{type:a,value:E}]},{type:a,value:d},{type:b,tag:m,props:{},children:[{type:a,value:"Elastic Search"}]},{type:a,value:d},{type:b,tag:m,props:{},children:[{type:a,value:"MongoDb"}]},{type:a,value:d}]},{type:a,value:d},{type:b,tag:f,props:{},children:[{type:a,value:"Ce billet est le dernier d'une série de 4 dans lequel nous allons faire juste un récapitulatif."}]},{type:a,value:d},{type:b,tag:f,props:{},children:[{type:a,value:"Je vous propose un tableau récapitulatif des perfs collectées ici."}]},{type:a,value:d},{type:b,tag:f,props:{},children:[{type:a,value:"Encore une fois on compare des bases qui n’ont pas le même objectif et c’était aussi pour moi l’occasion de me familiariser avec donc à prendre avec des pincettes."}]},{type:a,value:d},{type:b,tag:f,props:{},children:[{type:b,tag:h,props:{href:"http:\u002F\u002Fhakanai.free.fr\u002Findex.php\u002Fnosql-4-bases-a-la-loupe-44\u002Frecap\u002F",rel:[i,j,k],target:l},children:[{type:b,tag:s,props:{alt:t,src:"\u002Fimages\u002Frecap.png",title:"recap"},children:[]}]}]},{type:a,value:d},{type:b,tag:f,props:{},children:[{type:a,value:"Note : j'ai supprimé le temps du count de Mysql pour garder une échelle lisible sur le graphe"}]},{type:a,value:d},{type:b,tag:f,props:{},children:[{type:a,value:"Et le tableau de valeur :"}]},{type:a,value:d},{type:b,tag:F,props:{className:[F,"table-stripped"]},children:[{type:b,tag:"tbody",props:{},children:[{type:b,tag:o,props:{},children:[{type:b,tag:c,props:{width:289,height:p},children:[]},{type:b,tag:c,props:{width:n},children:[{type:a,value:"Jedis"}]},{type:b,tag:c,props:{width:n},children:[{type:a,value:"Jongo"}]},{type:b,tag:c,props:{width:n},children:[{type:a,value:"Morphia"}]},{type:b,tag:c,props:{width:n},children:[{type:a,value:"Mysql"}]},{type:b,tag:c,props:{width:n},children:[{type:a,value:"Jest"}]},{type:b,tag:c,props:{width:n},children:[{type:a,value:"ElasticSearch"}]},{type:b,tag:c,props:{width:n},children:[{type:a,value:E}]}]},{type:b,tag:o,props:{},children:[{type:b,tag:c,props:{height:p},children:[{type:a,value:"findByLoginShouldReturnSomething"}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:u}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:v}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:G}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:H}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:"0,24"}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:H}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:"0,22"}]}]},{type:b,tag:o,props:{},children:[{type:b,tag:c,props:{height:p},children:[{type:a,value:"assertThatMyDatabaseHasMoreThan100Profile"}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:"0,00"}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:v}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:v}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:"1,27"}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:I}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:w}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:J}]}]},{type:b,tag:o,props:{},children:[{type:b,tag:c,props:{height:p},children:[{type:a,value:"testSearchWithEmbeddedObject"}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:u}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:u}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:G}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:w}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:K}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:w}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:J}]}]},{type:b,tag:o,props:{},children:[{type:b,tag:c,props:{height:p},children:[{type:a,value:"testGeoSpatialSearch"}]},{type:b,tag:c,props:{},children:[]},{type:b,tag:c,props:{align:e},children:[{type:a,value:K}]},{type:b,tag:c,props:{align:e},children:[{type:a,value:I}]},{type:b,tag:c,props:{},children:[]},{type:b,tag:c,props:{},children:[]},{type:b,tag:c,props:{},children:[]},{type:b,tag:c,props:{},children:[]}]}]}]},{type:a,value:d},{type:b,tag:f,props:{},children:[{type:a,value:"On remarquera que l’argument initial concernant les performances pour ne pas choisir de faire du relationnel ne semble finalement pas très pertinent. Le count est effectivement plus coûteux mais par contre les find sont à peine sur un rapport de 1 à 2,5 en faveur de mongo."}]},{type:a,value:d},{type:b,tag:f,props:{},children:[{type:a,value:"Par acquis de conscience j’ai donc voulu refaire le test sur une plus grosse volumétrie ("},{type:b,tag:g,props:{},children:[{type:a,value:"900 000 lignes"}]},{type:a,value:") :"}]},{type:a,value:d},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{},children:[{type:a,value:q}]},{type:a,value:L},{type:b,tag:g,props:{},children:[{type:a,value:M}]},{type:a,value:" [+- 0.00], round.gc: 0.00 [+- 0.00], GC.calls: 0, GC.time: 0.00, time.total: 0.17, time.warmup: 0.09, time.bench: 0.07 "},{type:b,tag:g,props:{},children:[{type:a,value:q}]},{type:a,value:N},{type:b,tag:g,props:{},children:[{type:a,value:M}]},{type:a,value:" [+- 0.00], round.gc: 0.00 [+- 0.00], GC.calls: 1, GC.time: 0.01, time.total: 0.17, time.warmup: 0.06, time.bench: 0.11 "},{type:b,tag:g,props:{},children:[{type:a,value:q}]},{type:a,value:O},{type:b,tag:g,props:{},children:[{type:a,value:"0.03"}]},{type:a,value:" [+- 0.00], round.gc: 0.00 [+- 0.00], GC.calls: 1, GC.time: 0.01, time.total: 0.50, time.warmup: 0.23, time.bench: 0.27 "},{type:b,tag:g,props:{},children:[{type:a,value:q}]},{type:a,value:".testGeoSpatialSearch: [measured 10 out of 15 rounds, threads: 1 (sequential)] round: "},{type:b,tag:g,props:{},children:[{type:a,value:"0.21"}]},{type:a,value:" [+- 0.04], round.gc: 0.00 [+- 0.00], GC.calls: 3, GC.time: 0.15, time.total: 3.78, time.warmup: 1.66, time.bench: 2.12"}]},{type:a,value:d},{type:b,tag:f,props:{},children:[{type:b,tag:g,props:{},children:[{type:a,value:x}]},{type:a,value:L},{type:b,tag:g,props:{},children:[{type:a,value:P}]},{type:a,value:" [+- 0.00], round.gc: 0.00 [+- 0.00], GC.calls: 1, GC.time: 0.00, time.total: 287.68, time.warmup: 285.32, time.bench: 2.37 "},{type:b,tag:g,props:{},children:[{type:a,value:x}]},{type:a,value:N},{type:b,tag:g,props:{},children:[{type:a,value:"11.33"}]},{type:a,value:" [+- 0.14], round.gc: 0.00 [+- 0.00], GC.calls: 0, GC.time: 0.00, time.total: 169.79, time.warmup: 56.52, time.bench: 113.27 "},{type:b,tag:g,props:{},children:[{type:a,value:x}]},{type:a,value:O},{type:b,tag:g,props:{},children:[{type:a,value:P}]},{type:a,value:" [+- 0.00], round.gc: 0.00 [+- 0.00], GC.calls: 1, GC.time: 0.00, time.total: 3.55, time.warmup: 1.19, time.bench: 2.36"}]},{type:a,value:d},{type:b,tag:f,props:{},children:[{type:b,tag:h,props:{href:"http:\u002F\u002Fhakanai.free.fr\u002Findex.php\u002Fnosql-4-bases-a-la-loupe-44\u002Fjongo-mysql\u002F",rel:[i,j,k],target:l},children:[{type:b,tag:s,props:{alt:t,src:"\u002Fimages\u002Fjongo.mysql_-300x179.png",title:"jongo.mysql"},children:[]}]}]},{type:a,value:d},{type:b,tag:f,props:{},children:[{type:a,value:"La ok, on commence bien à voir les divergences. C'est surtout intéressant de constater la bonne tenue de Mongo malgré le changement de volumétrie. Enfin la je me rassure comme je peux car nous sommes encore loin des 900 000 records pour le modèle que nous cherchons à créer. L’avenir nous dira si c’était un bon choix. Quoi qu’il en soit, ne serait-ce que pour la facilité d’admin sur Heroku et la simplicité en dev je ne suis pas déçu de nos choix. Mongodb\u002FElastic Search nous apporte toute satisfaction. Quand au projet en lui-même, j'espère que l'on pourra ouvrir les portes en béta avant la fin d'année ;)"}]},{type:a,value:d},{type:b,tag:f,props:{},children:[{type:a,value:"Et bien sûr je serais ravi d’avoir d’autres retours si vous en avez à partager."}]},{type:a,value:d},{type:b,tag:f,props:{},children:[{type:a,value:"Pour revoir chaque billet :"}]},{type:a,value:d},{type:b,tag:D,props:{},children:[{type:a,value:d},{type:b,tag:m,props:{},children:[{type:b,tag:h,props:{href:"http:\u002F\u002Fhakanai.free.fr\u002Findex.php\u002Fnosql-4-bases-a-la-loupe-14\u002F",rel:[i,j,k],target:l,title:"Nosql, 4 bases à la loupe 1\u002F4"},children:[{type:a,value:"L'intro"}]}]},{type:a,value:d},{type:b,tag:m,props:{},children:[{type:b,tag:h,props:{href:"http:\u002F\u002Fhakanai.free.fr\u002Findex.php\u002Fnosql-4-bases-a-la-loupe-24\u002F",rel:[i,j,k],target:l,title:"Nosql, 4 bases à la loupe 2\u002F4"},children:[{type:a,value:"Redis et Mongo"}]}]},{type:a,value:d},{type:b,tag:m,props:{},children:[{type:b,tag:h,props:{href:"http:\u002F\u002Fhakanai.free.fr\u002Findex.php\u002Fnosql-4-bases-a-la-loupe-34\u002F",rel:[i,j,k],target:l,title:Q},children:[{type:a,value:"ElasticSearch et Solr"}]}]},{type:a,value:d},{type:b,tag:m,props:{},children:[{type:b,tag:h,props:{href:"http:\u002F\u002Fhakanai.free.fr\u002Findex.php\u002Fnosql-4-bases-a-la-loupe-44\u002F",rel:[i,j,k],target:l},children:[{type:a,value:"Le récap"}]}]},{type:a,value:d}]}]},dir:"\u002Farticles\u002F2012\u002F11\u002F11",path:"\u002Farticles\u002F2012\u002F11\u002F11\u002Fnosql-4-bases-a-la-loupe-44",extension:".md",createdAt:R,updatedAt:R,bodyPlainText:"\nVous vous rappelez du bouquin 7 databases in seven weeks ? Pour le coup j'ai eu l'occasion de réaliser une expérience un peu moins ambitieuse, seulement 4 bases de données. Et si je n'ai pas été aussi loin que le bouquin précédent je vous propose quand même un retour d'expérience sur :\n\nRedis\nSolr\nElastic Search\nMongoDb\n\nCe billet est le dernier d'une série de 4 dans lequel nous allons faire juste un récapitulatif.\n\nJe vous propose un tableau récapitulatif des perfs collectées ici.\n\nEncore une fois on compare des bases qui n’ont pas le même objectif et c’était aussi pour moi l’occasion de me familiariser avec donc à prendre avec des pincettes.\n\n\n\nNote : j'ai supprimé le temps du count de Mysql pour garder une échelle lisible sur le graphe\n\n \n\nEt le tableau de valeur :\n\nJedisJongoMorphiaMysqlJestElasticSearchSolrfindByLoginShouldReturnSomething0,030,010,020,050,240,050,22assertThatMyDatabaseHasMoreThan100Profile0,000,010,011,270,180,040,20testSearchWithEmbeddedObject0,030,030,020,040,210,040,20testGeoSpatialSearch0,210,18\n\n \n\nOn remarquera que l’argument initial concernant les performances pour ne pas choisir de faire du relationnel ne semble finalement pas très pertinent. Le count est effectivement plus coûteux mais par contre les find sont à peine sur un rapport de 1 à 2,5 en faveur de mongo.\n\nPar acquis de conscience j’ai donc voulu refaire le test sur une plus grosse volumétrie (900 000 lignes) :\n\nJongoTest.findByLoginShouldReturnSomething: \\[measured 10 out of 15 rounds, threads: 1 (sequential)\\] round: 0.01 \\[+- 0.00\\], round.gc: 0.00 \\[+- 0.00\\], GC.calls: 0, GC.time: 0.00, time.total: 0.17, time.warmup: 0.09, time.bench: 0.07 JongoTest.assertThatMyDatabaseHasMoreThan100Profile: \\[measured 10 out of 15 rounds, threads: 1 (sequential)\\] round: 0.01 \\[+- 0.00\\], round.gc: 0.00 \\[+- 0.00\\], GC.calls: 1, GC.time: 0.01, time.total: 0.17, time.warmup: 0.06, time.bench: 0.11 JongoTest.testSearchWithEmbeddedObject: \\[measured 10 out of 15 rounds, threads: 1 (sequential)\\] round: 0.03 \\[+- 0.00\\], round.gc: 0.00 \\[+- 0.00\\], GC.calls: 1, GC.time: 0.01, time.total: 0.50, time.warmup: 0.23, time.bench: 0.27 JongoTest.testGeoSpatialSearch: \\[measured 10 out of 15 rounds, threads: 1 (sequential)\\] round: 0.21 \\[+- 0.04\\], round.gc: 0.00 \\[+- 0.00\\], GC.calls: 3, GC.time: 0.15, time.total: 3.78, time.warmup: 1.66, time.bench: 2.12\n\nJDBCTest.findByLoginShouldReturnSomething: \\[measured 10 out of 15 rounds, threads: 1 (sequential)\\] round: 0.24 \\[+- 0.00\\], round.gc: 0.00 \\[+- 0.00\\], GC.calls: 1, GC.time: 0.00, time.total: 287.68, time.warmup: 285.32, time.bench: 2.37 JDBCTest.assertThatMyDatabaseHasMoreThan100Profile: \\[measured 10 out of 15 rounds, threads: 1 (sequential)\\] round: 11.33 \\[+- 0.14\\], round.gc: 0.00 \\[+- 0.00\\], GC.calls: 0, GC.time: 0.00, time.total: 169.79, time.warmup: 56.52, time.bench: 113.27 JDBCTest.testSearchWithEmbeddedObject: \\[measured 10 out of 15 rounds, threads: 1 (sequential)\\] round: 0.24 \\[+- 0.00\\], round.gc: 0.00 \\[+- 0.00\\], GC.calls: 1, GC.time: 0.00, time.total: 3.55, time.warmup: 1.19, time.bench: 2.36\n\n \n\n\n\nLa ok, on commence bien à voir les divergences. C'est surtout intéressant de constater la bonne tenue de Mongo malgré le changement de volumétrie. Enfin la je me rassure comme je peux car nous sommes encore loin des 900 000 records pour le modèle que nous cherchons à créer. L’avenir nous dira si c’était un bon choix. Quoi qu’il en soit, ne serait-ce que pour la facilité d’admin sur Heroku et la simplicité en dev je ne suis pas déçu de nos choix. Mongodb\u002FElastic Search nous apporte toute satisfaction. Quand au projet en lui-même, j'espère que l'on pourra ouvrir les portes en béta avant la fin d'année ;)\n\nEt bien sûr je serais ravi d’avoir d’autres retours si vous en avez à partager.\n\nPour revoir chaque billet :\n\nL'intro\nRedis et Mongo\nElasticSearch et Solr\nLe récap\n",readTime:{text:"4 min read",minutes:3.05,time:183000,words:610}},relatedArticles:[{slug:"nosql-4-bases-a-la-loupe-34",description:y,id:"673",title:Q,date:z,tags:[A,"jest","lucene",B],img:C,cover:S,path:"\u002Farticles\u002F2012\u002F11\u002F11\u002Fnosql-4-bases-a-la-loupe-34"},{slug:"curseurs-et-mongodb",description:"A chaque fois que je donne la formation Mongo je reste étonné lors de ce slide (qui fait le parallèle entre les termes utilisé en relationnel et avec ...",id:"1137",title:"Curseurs et Mongodb",date:"2015-01-26",tags:["jongo",r],img:"43c58-slideterminology.jpg",cover:"cover1.jpg",path:"\u002Farticles\u002F2015\u002F01\u002F26\u002Fcurseurs-et-mongodb"},{slug:"mongodb-utiliser-les-proprietes-de-vos-objectid-dans-vos-mapreduce",description:"Je vous propose de voir deux fonctionnalités plutôt pratiques de [MongoDB](http:\u002F\u002Fwww.mongodb.org\u002F) dans ce billet. D’une part je vais vous parler de ...",id:"970",title:"MongoDB : Utiliser les propriétés de vos ObjectId dans vos MapReduce",date:"2013-09-28",tags:["mapreduce",r],img:"objectid.png",cover:S,path:"\u002Farticles\u002F2013\u002F09\u002F28\u002Fmongodb-utiliser-les-proprietes-de-vos-objectid-dans-vos-mapreduce"}],_img:{"/_ipx/_/hugo-nb.jpg":"\u002F_nuxt\u002Fimage\u002Fc3e54c.jpg"}}],fetch:{},mutations:void 0}}("text","element","td","\n","right","p","strong","a","nofollow","noopener","noreferrer","_blank","li",83,"tr",19,"JongoTest","mongodb","img","","0,03","0,01","0,04","JDBCTest","[![](\u002Fimages\u002Fnosql-logo.gif \"nosql-logo\")](http:\u002F\u002Fhakanai.free.fr\u002Findex.php\u002Fnosql-4-bases-a-la-loupe-14\u002Fnosql-logo\u002F)Vous vous rappelez du bouquin [7 d...","2012-11-11","elasticsearch","solr","nosql-logo.gif","ul","Solr","table","0,02","0,05","0,18","0,20","0,21",".findByLoginShouldReturnSomething: [measured 10 out of 15 rounds, threads: 1 (sequential)] round: ","0.01",".assertThatMyDatabaseHasMoreThan100Profile: [measured 10 out of 15 rounds, threads: 1 (sequential)] round: ",".testSearchWithEmbeddedObject: [measured 10 out of 15 rounds, threads: 1 (sequential)] round: ","0.24","Nosql, 4 bases à la loupe 3\u002F4","2022-05-22T20:25:20.493Z","cover7.jpg")));