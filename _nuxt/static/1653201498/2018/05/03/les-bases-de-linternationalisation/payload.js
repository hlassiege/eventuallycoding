__NUXT_JSONP__("/2018/05/03/les-bases-de-linternationalisation", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR){return {data:[{article:{slug:"les-bases-de-linternationalisation",description:"Mode dépoussiérage activé, aujourd’hui j’ai envie de réactiver une série de billets que je n’avais jamais publié autour de l’internationalisation.\nCe...",id:"1329",title:"Les bases de l'internationalisation",date:"2018-05-03",categories:["waza"],tags:[F,"internationalisation","localisation"],img:"c13cf-image12.png",cover:"cover8.jpg",toc:[{id:G,depth:H,text:I},{id:J,depth:H,text:K},{id:L,depth:u,text:M},{id:N,depth:u,text:O},{id:P,depth:u,text:Q},{id:R,depth:u,text:S},{id:T,depth:u,text:U},{id:V,depth:u,text:W},{id:X,depth:u,text:Y},{id:Z,depth:u,text:_},{id:$,depth:u,text:aa}],body:{type:"root",children:[{type:b,tag:d,props:{},children:[{type:a,value:"Mode dépoussiérage activé, aujourd’hui j’ai envie de réactiver une série de billets que je n’avais jamais publié autour de l’internationalisation."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Ces billets ont été écrits en grande partie il y a 8 ans en 2010 lorsque je démarrais "},{type:b,tag:e,props:{href:"http:\u002F\u002Fwww.eventuallycoding.com\u002Findex.php\u002Fcreer-un-soft-on-fait-comment-nemrod-15\u002F",rel:[f,g,h],target:i},children:[{type:a,value:"localizeyourapps.com"}]},{type:a,value:" un side project qui visait à simplifier le workflow de traduction en l’intégrant au sein de l’usine logicielle. Trève de bavardage, démarrons."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Vous travaillez sur une application et vous souhaitez la rendre disponible partout dans le monde ? Dans ce cas votre logiciel doit s’adapter aux différentes cultures des personnes qui vont l’utiliser à travers le globe."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Cette adaptation va consister à traduire le logiciel, afficher correctement les chiffres, les dates, parfois les images (si elles contiennent du texte par exemple), la mise en page quand la langue s’affiche de droite à gauche ou de gauche à droite et plein d’autre choses encore..."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Tout d’abord avant d’aller plus loin, un petit rappel des termes :"}]},{type:a,value:c},{type:b,tag:y,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"L’internationalisation, que l’on abrège en i18n (car il y a 18 lettres entre i et n dans le mot) consiste à préparer un logiciel pour qu’il puisse être utilisé dans plusieurs pays"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"La localisation (ou régionalisation), que l’on abrège en l10n, consiste à localiser le logiciel pour une culture particulière."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:ab,props:{id:G},children:[{type:b,tag:e,props:{href:"#linternationalisation",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:I}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Comprenons nous bien, lorsqu’on parle d’internationalisation il s’agit d’un ensemble de pratiques et techniques à mettre en place pour être capable de présenter votre site dans d’autres langues et cultures."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Et ça va largement plus loin que de “juste” traduire son site."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"C’est quelque chose qui nécessite beaucoup de temps et si vous ne prévoyez pas d’ouvrir votre site à l’étranger tout dans ce billet ne sera pas bon à prendre."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Faut-il anticiper au risque d’en faire trop et de vous ralentir alors que vous n’êtes encore que sur un seul marché ? Ou bien faut-il le faire au dernier moment au risque de devoir tout stopper pendant 6 mois le jour où vous vous y mettez sérieusement ?"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"De mon point de vue côté ingénierie il y a des pratiques à mettre en oeuvre dès le début du projet car elles font de toute façon partie des bonnes pratiques de base : utilisation de fichiers externes pour les chaînes de caractères, gestion des formatage de date et nombre, encodage en UTF-8 etc…"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Mais par la suite, surtout lorsqu’on parlera de localisation, vous verrez que cela va bien plus loin :"}]},{type:a,value:c},{type:b,tag:y,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"votre partenaire de paiement fonctionne-t-il bien sur les autres marchés et dans une autre devise ?"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"l’assurance proposé sur votre site est-elle valable en dehors de France ?"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"votre service de support qui fonctionne entre 9h et 18h est-il adapté pour fonctionner avec 6h de décalage horaire."}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"vos articles de presse que vous mettez en avant sur votre page “ils parlent de nous” sont-ils vraiment adaptés pour vos clients étrangers ?"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"vos CGU sont elles applicables ?"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"est-ce qu’il n’existe pas une législation locale qui encadre mon activité et que je dois respecter ? (pensez à la taxe de séjour française pour airbnb par exemple)."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"etc..."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Commençons donc par la partie “simple”, les bonnes pratiques de développement."}]},{type:a,value:c},{type:b,tag:ab,props:{id:J},children:[{type:b,tag:e,props:{href:"#les-bonnes-pratiques-de-d%C3%A9veloppement",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:K}]}]},{type:a,value:c},{type:b,tag:v,props:{id:L},children:[{type:b,tag:e,props:{href:"#lencodage",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:M}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:"http:\u002F\u002Feventuallycoding.com\u002Fwp-content\u002Fuploads\u002F2018\u002F05\u002Fc13cf-image12.png",rel:[f,g,h],target:i},children:[{type:b,tag:s,props:{alt:t,src:"\u002Fimages\u002Fc13cf-image12.png"},children:[]}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Les caractères que l’on retrouve dans nos applications sont représentées par un ensemble de code pour la machine. En effet tout doit, in fine, se retrouver réduit à des nombres qui seront transposés en binaire pour un programme informatique."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Pour cela on va associer un nombre à un caractère de façon arbitraire et cette représentation doit ensuite être partagé pour tout le monde pour réafficher et\u002Fou interpréter le texte."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Mettons que je vous dise que la lettre A c’est 1, si je vous envoie 1 vous devez de votre côté le transformer en A."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Et c’est ainsi que sont définis les différents charset (jeu de caractères) qui définissent des associations entre des nombres et des caractères."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Prenons ici un jeu de caractères très simplistes qui permet d’avoir toutes les lettres majuscules :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"A -\u003E 1"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"B -\u003E 2"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"…"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Z -\u003E 26"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Avec cette réprésentation simpliste qui ne permet d’écrire que en majuscules , la représentation du mot “FRANCAIS” sera transposé comme suit :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"6 18 1 14 3 1 9 19"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Par contre il va me falloir compléter ce jeu de caractères si je veux écrire aussi en minuscules, ajouter les accents etc…"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Le jeu de code que l’on connaît souvent le plus est l’ISO-latin1 qui nous permet d’encoder chaque caractère français, celui-ci est trop limité et ne permet d’écrire que 256 caractères."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Pour permettre d’écrire en Chinois ou en Japonais par exemple ce sera largement insuffisant et nous aurons recours à un autre jeu de caractères plus étendu, comme l’UTF-8."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Le support d’un jeu de caractères Unicode (qui comprend UTF-8 ou UTF-16) est donc très important pour permettre l’utilisation de votre application dans toutes les langues."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Ce support est natif dans plusieurs langages, Java, C# et Python par exemple."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Par natif j’entends que le programmeur n’a pas d’effort particulière à faire pour écrire et utiliser une chaîne de caractère en unicode sans vous retrouver avec des Ã© ensuite."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"En Python 2.x il fallait cependant préfixer les chaînes de caractère par un u :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:ac,rel:[f,g,h],target:i},children:[{type:a,value:ac}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Python 3.x a apporté le support par défaut de l’unicode au langage."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Le support de l’Unicode n’est  pas encore natif en PHP (prévu pour PHP6). Mais le module mbstring peut être utilisé pour manipuler des chaines en UTF-8 et les méthodes utf8_decode et utf8_encode permet de faire les conversions nécessaires."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:ad,rel:[f,g,h],target:i},children:[{type:a,value:ad}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:z,props:{},children:[{type:a,value:"(Pour rappel cet article a été écrit en 2010. Depuis, PHP s’est largement vautré sur PHP 6 mais a fini par sortir PHP7 qui supporte désormais nativement l’unicode)"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Toutefois le support de l’Unicode par votre langage de programmation n’est pas suffisant, la difficulté principale d’une application c’est qu’elle communique avec d’autres applications."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"De façon générale, tous vos flux entrants ou sortants doivent être étudiées afin de vérifier s’ils supportent ou non l’Unicode."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Et surtout, votre application et les autres applications "},{type:b,tag:l,props:{},children:[{type:a,value:"doivent s’entendre"}]},{type:a,value:" sur le jeu de caractères à utiliser."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Et oui, elles savent peut être toutes parler en UTF-8 mais il faut qu’elles se le disent."}]},{type:a,value:c},{type:b,tag:w,props:{id:"la-base-de-données"},children:[{type:b,tag:e,props:{href:"#la-base-de-donn%C3%A9es",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:"La base de données"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Considérons que votre base de données est correctement configuré avec le bon jeu de caractères, le code applicatif doit encore s’y connecter correctement."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"En Java, l’url jdbc pour Mysql s’écrit de la sorte :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:ae,rel:[f,g,h],target:i},children:[{type:a,value:ae}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"En C#, la connectionStrings pour Mysql :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:af,rel:[f,g,h],target:i},children:[{type:a,value:af}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Pour l’anecdote (*)"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Pour SQLServer, la logique est différente, le Charset n’est pas spécifié dans la chaîne de connexion mais est défini au niveau du type des colonnes dans la base. Pour passer en unicode, il faut utiliser les colonnes prefixé par n (nchar, nvarchar, ntext). L’unicode supporté par SQL Server est UTF-16. Attention, avec SQL Server, il faut préciser la collation à utiliser."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"(*) qui ne sert à rien mais qui permet de faire comme si on maîtrisait super bien, ce qui relève de l’imposture totale au passage :)"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"En Python, pour mysql :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:ag,rel:[f,g,h],target:i},children:[{type:a,value:ag}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"En PHP, pour mysql :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:ah,rel:[f,g,h],target:i},children:[{type:a,value:ah}]}]},{type:a,value:c},{type:b,tag:w,props:{id:"le-charset-de-vos-pages-html"},children:[{type:b,tag:e,props:{href:"#le-charset-de-vos-pages-html",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:"Le charset de vos pages HTML"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"HTML possède une balise pour préciser au navigateur le jeu de caractères le plus adapté pour restituer votre page. Ici donc, pas de relation avec votre langage de programmation, c’est en HTML que vous spécifiez comment parler Unicode."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:ai,rel:[f,g,h],target:i},children:[{type:a,value:ai}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Votre application peut aussi renvoyer un header (une information qui sera interprété par votre navigateur) et ce header aura la précédence aura la précédence. Donc vous pouvez aussi envoyer un header HTTP, par exemple en PHP :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aj,rel:[f,g,h],target:i},children:[{type:a,value:aj}]}]},{type:a,value:c},{type:b,tag:w,props:{id:"la-spécification-dencodage-de-vos-flux-xml"},children:[{type:b,tag:e,props:{href:"#la-sp%C3%A9cification-dencodage-de-vos-flux-xml",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:"La spécification d’encodage de vos flux XML"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"De même qu’en HTML, XML définit un attribut pour indiquer l’encodage de vos caractères au différents outils qui vont lire le flux."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:ak,rel:[f,g,h],target:i},children:[{type:a,value:ak}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Vous l’aurez compris, afin de pouvoir bénéficier du jeu de caractères le plus étendu pour l’ensemble des langues du globe, il vous faudra configurer votre application et celles qui communiquent avec elle en UTF-8."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Maintenant passons à la suite, comment identifier la culture courante."}]},{type:a,value:c},{type:b,tag:v,props:{id:N},children:[{type:b,tag:e,props:{href:"#identifier-la-culture-courante",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:O}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Lorsqu’un utilisateur parcourt votre application, vous devez savoir comment il préfère que s’affiche les chiffres, les dates, quelle langue il parle afin de lui proposer le contenu le plus adapté. Il faut donc identifier sa langue et sa culture."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Un mécanisme important pour l’internationalisation d’un logiciel repose donc sur cette identification de la culture de l’utilisateur."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Et j’insiste, plus que la langue, on va parler de "},{type:b,tag:l,props:{},children:[{type:a,value:F}]},{type:a,value:" qui va englober la langue, le pays et les conventions culturelles."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Ca tombe bien, la plupart des langages informatiques proposent un support de cette notion :"}]},{type:a,value:c},{type:b,tag:y,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"en java, on parle de Locale : "},{type:b,tag:e,props:{href:al,rel:[f,g,h],target:i},children:[{type:a,value:al}]}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"en .net, on parle de Culture : "},{type:b,tag:e,props:{href:am,rel:[f,g,h],target:i},children:[{type:a,value:am}]}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"en Python, on parle de Locale : "},{type:b,tag:e,props:{href:an,rel:[f,g,h],target:i},children:[{type:a,value:an}]}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"en PHP, on parle de Locale : "},{type:b,tag:e,props:{href:ao,rel:[f,g,h],target:i},children:[{type:a,value:ao}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Dans la suite de l’article on utilisera indifféremment Culture ou Locale."}]},{type:a,value:c},{type:b,tag:w,props:{id:"pour-une-application-web"},children:[{type:b,tag:e,props:{href:"#pour-une-application-web",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:"Pour une application Web"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"le mécanisme d’identification va se reposer sur un header HTTP : "},{type:b,tag:e,props:{href:"http:\u002F\u002Fwww.w3.org\u002FProtocols\u002Frfc2616\u002Frfc2616-sec14.html",rel:[f,g,h],target:i},children:[{type:a,value:"Accept-language"}]},{type:a,value:". On fera cependant attention à proposer à l’utilisateur un moyen de changer sa Locale car "},{type:b,tag:e,props:{href:"http:\u002F\u002Fwww.w3.org\u002FInternational\u002Fquestions\u002Fqa-accept-lang-locales",rel:[f,g,h],target:i},children:[{type:a,value:"ce header ne suffit pas"}]},{type:a,value:" pour identifier à coup sur la Locale."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Note de 2018 : Ouh la, c’était un chapitre particulièrement trop simpliste ici. Alors oui, on peut se baser dessus mais c’est pas vraiment une bonne pratique. A la limite pour un intranet c’est bon mais si vous avez un site grand public, c’est clairement insuffisant de changer la langue de votre utilisateur uniquement sur la base d’un header et c’est déconseillé d’avoir le même site (les mêmes url) avec des contenus différents selon un header. Côté SEO surtout, les moteurs de recherche souhaitent qu’une url soit toujours associé à une même cible géographique."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Depuis j’ai rédigé un autre article bien plus complet sur "},{type:b,tag:e,props:{href:"https:\u002F\u002Fmedium.com\u002Fnerds-malt\u002Finternationalisation-et-noms-de-domaine-3a223a5abec7",rel:[f,g,h],target:i},children:[{type:a,value:"l’internationalisation et les noms de domaines"}]},{type:a,value:ap}]},{type:a,value:c},{type:b,tag:w,props:{id:"pour-une-application-lourde"},children:[{type:b,tag:e,props:{href:"#pour-une-application-lourde",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:"Pour une application lourde"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"L’identification de la langue de l’utilisateur repose sur les variables d’environnements du système, par exemple la variable LANG sous Unix."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Sur Windows, la langue se trouve dans la base de registre, dans HKEY_CURRENT_USERControlPanelInternationnalLocaleName."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"A noter qu’il existe parfois une méthode unifiée quelque soit l’OS pour récupérer la langue sans avoir à se soucier du nom de la variable et de la façon de la lire en fonction de l’OS."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:aq}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"La langue du système peut être récupéré via la propriété système :  “"},{type:b,tag:z,props:{},children:[{type:a,value:"user.language"}]},{type:a,value:"” mais un simple appel à Locale.getDefault() va renvoyer la locale du poste."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"En C# :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:ar,rel:[f,g,h],target:i},children:[{type:a,value:ar}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:C}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:as,rel:[f,g,h],target:i},children:[{type:a,value:as}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:at}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:au,rel:[f,g,h],target:i},children:[{type:a,value:au}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Ok, maintenant que vous avez mis en place cette détection de la culture courante, elle va pouvoir vous servir pour la mise en place des fichiers de langues."}]},{type:a,value:c},{type:b,tag:v,props:{id:P},children:[{type:b,tag:e,props:{href:"#mettre-en-place-des-fichiers-de-langues",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:Q}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Avant de pouvoir localiser, on extrait généralement les chaînes de caractères de l’application dans des fichiers en dehors du code. On sépare ensuite ces fichiers par langues. Un fichier pour le français, un autre pour l’anglais etc... Selon les langages il existe ensuite des mécanismes standardisées afin d’exploiter ces fichiers dans votre application."}]},{type:a,value:c},{type:b,tag:w,props:{id:"le-mécanisme-de-fallback"},children:[{type:b,tag:e,props:{href:"#le-m%C3%A9canisme-de-fallback",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:"Le mécanisme de fallback"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Ce mécanisme permet d’organiser les ressources hiérarchiquement et de rechercher une traduction en partant du haut de cette hiérarchie jusqu’au plus bas si on ne la trouve pas."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Dans l’exemple suivant, l’application a déterminé que l’utilisateur parle Français Canadien. Elle recherche donc d’abord la traduction en Français Canadien, puis en Français si elle n’existe pas, puis enfin dans la langue par défaut si la traduction n’a toujours pas été trouvée."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:"https:\u002F\u002Feventuallycoding.com\u002Fwp-content\u002Fuploads\u002F2019\u002F10\u002F24890-image8.png",rel:[f,g,h],target:i},children:[{type:b,tag:s,props:{alt:t,src:"\u002Fimages\u002F24890-image8.png"},children:[]}]}]},{type:a,value:c},{type:b,tag:w,props:{id:"lutilisation-des-codes-iso"},children:[{type:b,tag:e,props:{href:"#lutilisation-des-codes-iso",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:"L’utilisation des codes ISO"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Une seconde fonctionnalité très commune consiste à utiliser les codes ISO des pays et des langues pour retrouver le fichier de ressources. Ces codes ISO peuvent être utilisés dans le nom du fichier ou le nom du répertoire."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Les codes ISO des langues sont disponibles ici :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:av,rel:[f,g,h],target:i},children:[{type:a,value:av}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Les codes ISO des pays sont disponibles ici :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aw,rel:[f,g,h],target:i},children:[{type:a,value:aw}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Exemple : fr_FR pour le Français de France constitué de FR, code ISO pour la langue Française et FR code ISO pour le pays France."}]},{type:a,value:c},{type:b,tag:w,props:{id:"les-formats-de-fichier"},children:[{type:b,tag:e,props:{href:"#les-formats-de-fichier",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:"Les formats de fichier"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Le tableau ci-dessous récapitule les formats et mécanismes implémentés dans différents languages."}]},{type:a,value:c},{type:b,tag:"table",props:{},children:[{type:b,tag:"tbody",props:{},children:[{type:b,tag:A,props:{},children:[{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:"Langage"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:"Format"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:"Mécanisme de fallback"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:"Utilisation des codes ISO"}]}]}]},{type:b,tag:A,props:{},children:[{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:"Java"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:e,props:{href:"https:\u002F\u002Fdocs.oracle.com\u002Fjavase\u002F9\u002Fdocs\u002Fapi\u002Fjava\u002Futil\u002FResourceBundle.html"},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:"ResourceBundle"}]}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:x}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:x}]}]}]},{type:b,tag:A,props:{},children:[{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:".Net"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:e,props:{href:"http:\u002F\u002Fmsdn.microsoft.com\u002Ffr-fr\u002Flibrary\u002Fekyft91f%28v=vs.80%29.aspx"},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:"Fichiers Resx"}]}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:x}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:x}]}]}]},{type:b,tag:A,props:{},children:[{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:"PHP (*)"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:e,props:{href:"http:\u002F\u002Fphp.net\u002Fmanual\u002Fen\u002Fclass.resourcebundle.php"},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:"ICU"}]}]},{type:b,tag:j,props:{style:k},children:[{type:a,value:" depuis la 5.3.0"}]},{type:b,tag:B,props:{},children:[]},{type:b,tag:j,props:{style:k},children:[{type:a,value:ax}]},{type:b,tag:B,props:{},children:[]},{type:b,tag:j,props:{style:k},children:[{type:a,value:"Tableau"}]},{type:b,tag:B,props:{},children:[]},{type:b,tag:j,props:{style:k},children:[{type:a,value:ax}]},{type:b,tag:B,props:{},children:[]},{type:b,tag:e,props:{href:"http:\u002F\u002Fwww.siteduzero.com\u002Ftutoriel-3-74650-un-site-multilingue-avec-gettext.html"},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:D}]}]},{type:b,tag:j,props:{style:k},children:[{type:a,value:E}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:ay}]},{type:b,tag:B,props:{},children:[]},{type:b,tag:j,props:{style:k},children:[{type:a,value:az}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:ay}]},{type:b,tag:B,props:{},children:[]},{type:b,tag:j,props:{style:k},children:[{type:a,value:az}]}]}]},{type:b,tag:A,props:{},children:[{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:"Python"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:e,props:{href:aA},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:D}]}]},{type:b,tag:j,props:{style:k},children:[{type:a,value:E}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:x}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:x}]}]}]},{type:b,tag:A,props:{},children:[{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:"C++"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:e,props:{href:aA},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:D}]}]},{type:b,tag:j,props:{style:k},children:[{type:a,value:E}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:x}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:j,props:{style:k},children:[{type:a,value:x}]}]}]}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"(*) PHP ne proposait pas de mécanisme intégré jusqu’à la version 5.3.0. Désormais il supporte le format ICU et un mécanisme de ResourceBundle. L’utilisation du format ICU reste très peu utilisé à l’heure de la rédaction de ce document. Un technique couramment utilisée consiste à inclure des fichiers PHP à partir de la langue choisi par l’utilisateur. Ces fichiers PHP contenant des tableaux de variables avec les traductions de l’application. Cependant il existe aussi une extension pour utiliser gettext (format PO)  et c’est pourquoi beaucoup d’applications PHP utilise aussi ce format assez répandu."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"(**) Le format PO est celui utilisé par l’outil Gnu gettext. Ce format même lorsqu’il n’est pas supporté nativement par un langage peut souvent être utilisé via une extension."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"On peut donc utiliser ce format en Scala, Java, PHP, Ruby, Python, Javascript, C, C++ etc..."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:z,props:{},children:[{type:a,value:"Rajout 2018 : En prenant un peu de recul, ce foisonnement de format n’est pas idéal. Tous ne permettent pas d’internationaliser correctement, je pense notamment au support des formes plurielles (que nous verrons plus bas, à la contextualisation etc...). En 2018 les choses n’ont guère évolué. Nous avons toujours Java qui se garde ses multiples trains de retard avec son API (trop) simpliste, d’autres formats qui sont apparus sur mobile, des formats adaptés aux apps Javascript etc…"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"La mise en oeuvre en dev reste simple cependant :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:aq}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aB,rel:[f,g,h],target:i},children:[{type:a,value:aB}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:C}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aC,rel:[f,g,h],target:i},children:[{type:a,value:aC}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"En Php :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Première méthode communément utilisé, on stocke les traductions dans des fichiers, un par langue. Le fichier est inclus de la façon suivante :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aD,rel:[f,g,h],target:i},children:[{type:a,value:aD}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"ensuite on lit la valeur dans le tableau que l’on sait exister dans ce fichier !"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aE,rel:[f,g,h],target:i},children:[{type:a,value:aE}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"C’est du bricolage mais cette méthode a été très longtemps utilisé."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Seconde méthode, utilisation de ICU :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aF,rel:[f,g,h],target:i},children:[{type:a,value:aF}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Je reviendrais plus tard sur ces fameux fichiers et leur intégration dans un workflow de développement."}]},{type:a,value:c},{type:b,tag:v,props:{id:R},children:[{type:b,tag:e,props:{href:"#le-formatage-des-nombres-des-devises-et-des-dates",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:S}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Les nombres et dates ne s’affichent pas de la même façon dans tous les pays, ça aurait été trop simple."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Si par exemple une date s’affiche Jour\u002Fmois\u002Fannée en France, elle s’affichera Mois\u002Fjour\u002FAnnée aux USA."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Pour un nombre, l’utilisation de virgules ou de points comme séparateur des milliers ou séparateurs de décimales est aussi lié au pays."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Quelques exemples pour les nombres tiré de la doc Oracle :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:"http:\u002F\u002Feventuallycoding.com\u002Fwp-content\u002Fuploads\u002F2018\u002F05\u002Fab60f-image7.png",rel:[f,g,h],target:i},children:[{type:b,tag:s,props:{alt:t,src:"\u002Fimages\u002Fab60f-image7.png"},children:[]}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Idem pour l’affichage des montants, on trouvera selon les pays les devises avant ou après le nombre :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:"http:\u002F\u002Feventuallycoding.com\u002Fwp-content\u002Fuploads\u002F2018\u002F05\u002F66439-image4.png",rel:[f,g,h],target:i},children:[{type:b,tag:s,props:{alt:t,src:"\u002Fimages\u002F66439-image4.png"},children:[]}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Bref, le foutoir."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Heureusement il existe une méthode standard dans la plupart des langages informatiques qui repose sur la Locale."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Avec la Locale vous laissez le langage choisir comment afficher vos dates, chiffres et montants."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Exemple en Java :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aG,rel:[f,g,h],target:i},children:[{type:a,value:aG}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"pour une monnaie"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aH,rel:[f,g,h],target:i},children:[{type:a,value:aH}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"et pour une date :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aI,rel:[f,g,h],target:i},children:[{type:a,value:aI}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"C# :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aJ,rel:[f,g,h],target:i},children:[{type:a,value:aJ}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"et pour une date"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aK,rel:[f,g,h],target:i},children:[{type:a,value:aK}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:C}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aL,rel:[f,g,h],target:i},children:[{type:a,value:aL}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:at}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Malheureusement, la notion de Locale n’est pas supporté correctement par les méthodes de formatage en PHP, il faut donc gérer vous même vos formats ou utiliser une librairie externe (méthode recommandée)."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"En PHP sans librairies :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aM,rel:[f,g,h],target:i},children:[{type:a,value:aM}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"On voit rapidement les limitations de ce système pour avoir une application pleinement internationalisé."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Avec PEAR et le module "},{type:b,tag:e,props:{href:"http:\u002F\u002Fpear.php.net\u002Fmanual\u002Fen\u002Fpackage.internationalization.i18nv2.i18nv2-locale.formatnumber.php",rel:[f,g,h],target:i},children:[{type:a,value:"i18nv2"}]},{type:a,value:" :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aN,rel:[f,g,h],target:i},children:[{type:a,value:aN}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"A noter que "},{type:b,tag:e,props:{href:"http:\u002F\u002Fframework.zend.com\u002Fmanual\u002Ffr\u002Fzend.locale.parsing.html",rel:[f,g,h],target:i},children:[{type:a,value:"Zend propose aussi une API"}]},{type:a,value:" pour l’internationalisation."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:z,props:{},children:[{type:a,value:"Note 2018 : Soyez indulgent, je ne fais plus de PHP depuis 15 ans et je disais sans doute des bêtises en 2010 :)"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:z,props:{},children:[{type:a,value:"(j’en dis toujours d’ailleurs)"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Alors ok c’est le foutoir mais là, que vous visiez l’international ou non, vous n’avez aucune excuse de ne pas utiliser les fonctionnalités de votre langage, ça ne coûte pas plus cher de bien faire."}]},{type:a,value:c},{type:b,tag:v,props:{id:T},children:[{type:b,tag:e,props:{href:"#la-gestion-des-dates",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:U}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Bien plus que leur affichage, la gestion des dates est l’un des sujets les plus pénibles quand on parle d’internationalisation. La grande difficulté réside dans le fait qu’une date est relative à un utilisateur, donc tout traitement qui les manipule, fait des différences de date ou calcule des anniversaires doit prendre en compte la zone temporelle. A cela vous ajoutez les soucis d’heure d’hiver\u002Fété qui ne sont pas identiques partout, les pays qui couvrent plusieurs timezone (et ceux qui ont décidé d’avoir la même heure malgré cela), les "},{type:b,tag:e,props:{href:"https:\u002F\u002Ffr.wikipedia.org\u002Fwiki\u002FSeconde_intercalaire",rel:[f,g,h],target:i},children:[{type:a,value:"secondes intercalaires"}]},{type:a,value:", les années bisextiles. Envoyer un email pour l’anniversaire d’un utilisateur peut déjà être un sport, calculer le temps d’une de ces communications si vous êtes un acteur téléphonique et que l’utilisateur est en roaming est aussi bien sympathique."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Bref, je ne vais pas entrer dans le détail mais le conseil relativement très général c’est surtout d’éviter de ne manipuler une date ou un timestamp sans information de timezone. Et encore plus en base de données, bien stocker la timezone est primordiale et pas juste se baser sur la timezone du serveur qui fait tourner votre base de données (qui peut changer éventuellement ou être mal réglé)."}]},{type:a,value:c},{type:b,tag:v,props:{id:V},children:[{type:b,tag:e,props:{href:"#les-images",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:W}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Les images ont parfois besoin d’être internationalisé car elles contiennent du texte ou ont des références culturelles qu’il faut pouvoir adapter à un autre pays."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:"http:\u002F\u002Feventuallycoding.com\u002Fwp-content\u002Fuploads\u002F2018\u002F05\u002Fb1a43-image11.png",rel:[f,g,h],target:i},children:[{type:b,tag:s,props:{alt:t,src:"\u002Fimages\u002Fb1a43-image11.png"},children:[]}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Malheureusement l’internationalisation d’une image est moins standardisée. Seul C# propose un mécanisme à travers les fichiers resx qui peuvent aussi contenir des images."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Astuce : On peut cependant utiliser les fichiers de ressources pour stocker les noms des images et ainsi réutiliser le mécanisme standard de localisation pour les images. Par contre ne mélangez pas ces chaînes “techniques” à vos traductions sinon bon courage pour expliquer à vos traducteurs ce qu’il faut faire de ces chaînes de caractère."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Bonne pratique :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Le coût de localisation d’une image étant souvent supérieure à la localisation d’un texte, il est préférable dans la mesure du possible d’éviter l’utilisation d’image avec texte. Il est possible d’ajouter ce texte à la volée via un post traitement de l’image et de mettre en cache les images localisées pour des questions de performance ou parfois d’appliquer le texte en CSS dans le cadre d’une application Web."}]},{type:a,value:c},{type:b,tag:v,props:{id:X},children:[{type:b,tag:e,props:{href:"#la-taille-des-textes-%C3%A0-l%C3%A9cran",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:Y}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"La taille des textes varie en fonction des écritures. Si le design de votre application est au pixel près, le changement de langues peut avoir des effets dévastateurs."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:l,props:{},children:[{type:a,value:"La longueur du texte varie horizontalement"}]},{type:a,value:" : en effet si “anticonstitutionnellement” fait 25 caractères en français, il n’en fera que 17 dans sa traduction allemande (*). Sur un formulaire avec le label placé à gauche du champ de saisie l’alignement peut être cassé par un texte trop grand dans une des localisations."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Parmi les solutions que l’on peut mettre en place :"}]},{type:a,value:c},{type:b,tag:y,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Placer les labels au dessus des champs de saisie"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Prévoir plus de place pour les labels"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"(*) Et c’est un peu l’exception, de façon générale un texte en allemand prendra plus de place"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:l,props:{},children:[{type:a,value:"La longueur du texte varie verticalement"}]},{type:a,value:" : certaines langues, comme le Japonais ou le Chinois, vont nécessiter une plus grande taille de police pour être lisible."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Parmi les solutions :"}]},{type:a,value:c},{type:b,tag:y,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Choisir dès le début une police plus grande pour tous les langages"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"Laisser la possibilité à l’utilisateur de choisir d'agrandir sa police"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Pour une page web, une bonne pratique consiste à utiliser l’unité em pour le conteneur principal et en % pour les conteneurs en dessous laissant ainsi à l’utilisateur la possibilité de choisir lui-même la taille par son navigateur"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Pour une application en client lourd, une option doit permettre de choisir la taille de police."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:aO}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Ici, "},{type:b,tag:e,props:{href:"http:\u002F\u002Ffr.splitweet.com\u002F",rel:[f,g,h],target:i},children:[{type:a,value:"splitweet"}]},{type:a,value:" "},{type:b,tag:z,props:{},children:[{type:a,value:"(note 2018 : site qui n’existe plus aujourd’hui)"}]},{type:a,value:" propose une mise en page centrée avec taille fixe en largeur. La police initiale est déjà assez grande et ne change pas en passant au Japonais par contre le div du dessous s'agrandit sans casser le reste de la mise en page."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:"http:\u002F\u002Feventuallycoding.com\u002Fwp-content\u002Fuploads\u002F2018\u002F05\u002Faf8a5-image13.png",rel:[f,g,h],target:i},children:[{type:b,tag:s,props:{alt:t,src:"\u002Fimages\u002Faf8a5-image13.png"},children:[]}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Même choix chez "},{type:b,tag:e,props:{href:"http:\u002F\u002Fwww.atlassian.com",rel:[f,g,h],target:i},children:[{type:a,value:"Atlassian"}]},{type:a,value:", la police initiale est assez grande pour ne pas avoir besoin de la changer. La mise en page n’est pas cassée malgré le fait que les paragraphes sont plus petits sur la version Japonaise."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:"http:\u002F\u002Feventuallycoding.com\u002Fwp-content\u002Fuploads\u002F2018\u002F05\u002Ffd2b8-image3.png",rel:[f,g,h],target:i},children:[{type:b,tag:s,props:{alt:t,src:"\u002Fimages\u002Ffd2b8-image3.png"},children:[]}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:"http:\u002F\u002Feventuallycoding.com\u002Fwp-content\u002Fuploads\u002F2018\u002F05\u002F865ef-image2.png",rel:[f,g,h],target:i},children:[{type:b,tag:s,props:{alt:t,src:"\u002Fimages\u002F865ef-image2.png"},children:[]}]}]},{type:a,value:c},{type:b,tag:v,props:{id:Z},children:[{type:b,tag:e,props:{href:"#laffichage-ltr-left-to-right-et-rtl-right-to-left",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:_}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Si vous visez un public multilingue très large, alors il vous faut aussi gérer la directivité du langage."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"C’est sans doute l’un des aspects de l’internationalisation le plus complexe et beaucoup de sites font l’impasse dessus (par exemple Twitter ou Jira ne proposent pas de langues RTL)"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Il existe deux formes d’écriture généralement supporté, l’écriture de droite à gauche et celle de gauche à droite. S’il existe aussi des écritures à directivité verticale, celles-ci acceptent d’être retranscrites en LTR ce qui fait que le support de l’écriture verticale n’est pas nécessaire."}]},{type:a,value:c},{type:b,tag:w,props:{id:"pour-une-application-web-1"},children:[{type:b,tag:e,props:{href:"#pour-une-application-web-1",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:"Pour une application web"}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Il existe un "},{type:b,tag:e,props:{href:"http:\u002F\u002Fwww.w3schools.com\u002Ftags\u002Fref_standardattributes.asp",rel:[f,g,h],target:i},children:[{type:a,value:"attribut"}]},{type:a,value:" pour préciser la directivité d’un élément. Ainsi"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:aP,rel:[f,g,h],target:i},children:[{type:a,value:aP}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"S’affichera :"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:aQ}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"et"}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:aQ}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Et il existe aussi "},{type:b,tag:e,props:{href:"http:\u002F\u002Fwww.w3schools.com\u002Fcssref\u002Fpr_text_direction.asp",rel:[f,g,h],target:i},children:[{type:a,value:"une propriété css"}]},{type:a,value:" : "},{type:b,tag:l,props:{},children:[{type:a,value:"direction"}]},{type:a,value:ap}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Mais il ne suffit pas de changer l’alignement des textes, c’est aussi le positionnement des éléments qui est à revoir pour des questions de convention."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"L’utilisation de feuilles de style redéfinissant les alignements et positionnement est donc nécessaire mais cela nécessite un énorme travail lors du design de l’application pour supporter deux mises en pages radicalement différentes."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:aO}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Facebook gère bien le passage à l’Arabe. Tous les positionnements sont inversés, y compris la barre d’action."}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:"http:\u002F\u002Feventuallycoding.com\u002Fwp-content\u002Fuploads\u002F2018\u002F05\u002F83dc8-image1.png",rel:[f,g,h],target:i},children:[{type:b,tag:s,props:{alt:t,src:"\u002Fimages\u002F83dc8-image1.png"},children:[]}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:b,tag:e,props:{href:"http:\u002F\u002Feventuallycoding.com\u002Fwp-content\u002Fuploads\u002F2018\u002F05\u002Fd00b3-image9.png",rel:[f,g,h],target:i},children:[{type:b,tag:s,props:{alt:t,src:"\u002Fimages\u002Fd00b3-image9.png"},children:[]}]}]},{type:a,value:c},{type:b,tag:v,props:{id:$},children:[{type:b,tag:e,props:{href:"#pour-aller-plus-loin",ariaHidden:o,tabIndex:p},children:[{type:b,tag:j,props:{className:[q,r]},children:[]}]},{type:b,tag:l,props:{},children:[{type:a,value:aa}]}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"L’idée n’était pas d’être exhaustive mais vous avez déjà un bon aperçu des problématiques classiques d’internationalisation. Et quand je dis que ce n’est pas exhaustif, je vous laisse méditer sur ces autres sujets :"}]},{type:a,value:c},{type:b,tag:y,props:{},children:[{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"le système de mesure : qui peut être métrique ou impérial"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"le format d’impression : a4, lettre US etc..."}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:a,value:"le système de mesure pour les chaussures et vêtements"}]},{type:a,value:c},{type:b,tag:n,props:{},children:[{type:b,tag:e,props:{href:"http:\u002F\u002Fwww.webrankinfo.com\u002Fdossiers\u002Ftechniques\u002Freferencement-sites-multilingues",rel:[f,g,h],target:i},children:[{type:a,value:"le référencement d’un site web"}]}]},{type:a,value:c}]}]},dir:"\u002Farticles\u002F2018\u002F05\u002F03",path:"\u002Farticles\u002F2018\u002F05\u002F03\u002Fles-bases-de-linternationalisation",extension:".md",createdAt:aR,updatedAt:aR,bodyPlainText:"\nMode dépoussiérage activé, aujourd’hui j’ai envie de réactiver une série de billets que je n’avais jamais publié autour de l’internationalisation.\n\nCes billets ont été écrits en grande partie il y a 8 ans en 2010 lorsque je démarrais localizeyourapps.com un side project qui visait à simplifier le workflow de traduction en l’intégrant au sein de l’usine logicielle. Trève de bavardage, démarrons.\n\nVous travaillez sur une application et vous souhaitez la rendre disponible partout dans le monde ? Dans ce cas votre logiciel doit s’adapter aux différentes cultures des personnes qui vont l’utiliser à travers le globe.\n\nCette adaptation va consister à traduire le logiciel, afficher correctement les chiffres, les dates, parfois les images (si elles contiennent du texte par exemple), la mise en page quand la langue s’affiche de droite à gauche ou de gauche à droite et plein d’autre choses encore...\n\n \n\nTout d’abord avant d’aller plus loin, un petit rappel des termes :\n\nL’internationalisation, que l’on abrège en i18n (car il y a 18 lettres entre i et n dans le mot) consiste à préparer un logiciel pour qu’il puisse être utilisé dans plusieurs pays\nLa localisation (ou régionalisation), que l’on abrège en l10n, consiste à localiser le logiciel pour une culture particulière.\n\nL’internationalisation\n\nComprenons nous bien, lorsqu’on parle d’internationalisation il s’agit d’un ensemble de pratiques et techniques à mettre en place pour être capable de présenter votre site dans d’autres langues et cultures.\n\nEt ça va largement plus loin que de “juste” traduire son site.\n\nC’est quelque chose qui nécessite beaucoup de temps et si vous ne prévoyez pas d’ouvrir votre site à l’étranger tout dans ce billet ne sera pas bon à prendre.\n\nFaut-il anticiper au risque d’en faire trop et de vous ralentir alors que vous n’êtes encore que sur un seul marché ? Ou bien faut-il le faire au dernier moment au risque de devoir tout stopper pendant 6 mois le jour où vous vous y mettez sérieusement ?\n\nDe mon point de vue côté ingénierie il y a des pratiques à mettre en oeuvre dès le début du projet car elles font de toute façon partie des bonnes pratiques de base : utilisation de fichiers externes pour les chaînes de caractères, gestion des formatage de date et nombre, encodage en UTF-8 etc…\n\n \n\nMais par la suite, surtout lorsqu’on parlera de localisation, vous verrez que cela va bien plus loin :\n\nvotre partenaire de paiement fonctionne-t-il bien sur les autres marchés et dans une autre devise ?\nl’assurance proposé sur votre site est-elle valable en dehors de France ?\nvotre service de support qui fonctionne entre 9h et 18h est-il adapté pour fonctionner avec 6h de décalage horaire.\nvos articles de presse que vous mettez en avant sur votre page “ils parlent de nous” sont-ils vraiment adaptés pour vos clients étrangers ?\nvos CGU sont elles applicables ?\nest-ce qu’il n’existe pas une législation locale qui encadre mon activité et que je dois respecter ? (pensez à la taxe de séjour française pour airbnb par exemple).\n\netc...\n\nCommençons donc par la partie “simple”, les bonnes pratiques de développement.\n\nLes bonnes pratiques de développement\n\nL’encodage\n\n\n\n \n\nLes caractères que l’on retrouve dans nos applications sont représentées par un ensemble de code pour la machine. En effet tout doit, in fine, se retrouver réduit à des nombres qui seront transposés en binaire pour un programme informatique.\n\nPour cela on va associer un nombre à un caractère de façon arbitraire et cette représentation doit ensuite être partagé pour tout le monde pour réafficher et\u002Fou interpréter le texte.\n\nMettons que je vous dise que la lettre A c’est 1, si je vous envoie 1 vous devez de votre côté le transformer en A.\n\nEt c’est ainsi que sont définis les différents charset (jeu de caractères) qui définissent des associations entre des nombres et des caractères.\n\nPrenons ici un jeu de caractères très simplistes qui permet d’avoir toutes les lettres majuscules :\n\nA -\u003E 1\n\nB -\u003E 2\n\n…\n\nZ -\u003E 26\n\nAvec cette réprésentation simpliste qui ne permet d’écrire que en majuscules , la représentation du mot “FRANCAIS” sera transposé comme suit :\n\n6 18 1 14 3 1 9 19\n\nPar contre il va me falloir compléter ce jeu de caractères si je veux écrire aussi en minuscules, ajouter les accents etc…\n\nLe jeu de code que l’on connaît souvent le plus est l’ISO-latin1 qui nous permet d’encoder chaque caractère français, celui-ci est trop limité et ne permet d’écrire que 256 caractères.\n\n \n\nPour permettre d’écrire en Chinois ou en Japonais par exemple ce sera largement insuffisant et nous aurons recours à un autre jeu de caractères plus étendu, comme l’UTF-8.\n\nLe support d’un jeu de caractères Unicode (qui comprend UTF-8 ou UTF-16) est donc très important pour permettre l’utilisation de votre application dans toutes les langues.\n\n \n\nCe support est natif dans plusieurs langages, Java, C# et Python par exemple.\n\nPar natif j’entends que le programmeur n’a pas d’effort particulière à faire pour écrire et utiliser une chaîne de caractère en unicode sans vous retrouver avec des Ã© ensuite.\n\nEn Python 2.x il fallait cependant préfixer les chaînes de caractère par un u :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-gistfile1-txt\n\nPython 3.x a apporté le support par défaut de l’unicode au langage.\n\nLe support de l’Unicode n’est  pas encore natif en PHP (prévu pour PHP6). Mais le module mbstring peut être utilisé pour manipuler des chaines en UTF-8 et les méthodes utf8\\_decode et utf8\\_encode permet de faire les conversions nécessaires.\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-gistfile2-txt\n\n(Pour rappel cet article a été écrit en 2010. Depuis, PHP s’est largement vautré sur PHP 6 mais a fini par sortir PHP7 qui supporte désormais nativement l’unicode)\n\n\nToutefois le support de l’Unicode par votre langage de programmation n’est pas suffisant, la difficulté principale d’une application c’est qu’elle communique avec d’autres applications.\n\nDe façon générale, tous vos flux entrants ou sortants doivent être étudiées afin de vérifier s’ils supportent ou non l’Unicode.\n\nEt surtout, votre application et les autres applications doivent s’entendre sur le jeu de caractères à utiliser.\n\nEt oui, elles savent peut être toutes parler en UTF-8 mais il faut qu’elles se le disent.\n\nLa base de données\n\nConsidérons que votre base de données est correctement configuré avec le bon jeu de caractères, le code applicatif doit encore s’y connecter correctement.\n\nEn Java, l’url jdbc pour Mysql s’écrit de la sorte :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-jdbcurl-txt\n\nEn C#, la connectionStrings pour Mysql :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-csharputf8url-txt\n\nPour l’anecdote (\\*)\n\nPour SQLServer, la logique est différente, le Charset n’est pas spécifié dans la chaîne de connexion mais est défini au niveau du type des colonnes dans la base. Pour passer en unicode, il faut utiliser les colonnes prefixé par n (nchar, nvarchar, ntext). L’unicode supporté par SQL Server est UTF-16. Attention, avec SQL Server, il faut préciser la collation à utiliser.\n\n(\\*) qui ne sert à rien mais qui permet de faire comme si on maîtrisait super bien, ce qui relève de l’imposture totale au passage :)\n\n\nEn Python, pour mysql :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-mysqlpythonconnection.txt\n\nEn PHP, pour mysql :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-mysqlphpconnection.txt\n\nLe charset de vos pages HTML\n\nHTML possède une balise pour préciser au navigateur le jeu de caractères le plus adapté pour restituer votre page. Ici donc, pas de relation avec votre langage de programmation, c’est en HTML que vous spécifiez comment parler Unicode.\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-htmlcharset.txt\n\nVotre application peut aussi renvoyer un header (une information qui sera interprété par votre navigateur) et ce header aura la précédence aura la précédence. Donc vous pouvez aussi envoyer un header HTTP, par exemple en PHP :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-phpheadercharset.txt\n\nLa spécification d’encodage de vos flux XML\n\nDe même qu’en HTML, XML définit un attribut pour indiquer l’encodage de vos caractères au différents outils qui vont lire le flux.\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-xmlcharset.txt\n\nVous l’aurez compris, afin de pouvoir bénéficier du jeu de caractères le plus étendu pour l’ensemble des langues du globe, il vous faudra configurer votre application et celles qui communiquent avec elle en UTF-8.\n\nMaintenant passons à la suite, comment identifier la culture courante.\n\nIdentifier la culture courante\n\nLorsqu’un utilisateur parcourt votre application, vous devez savoir comment il préfère que s’affiche les chiffres, les dates, quelle langue il parle afin de lui proposer le contenu le plus adapté. Il faut donc identifier sa langue et sa culture.\n\nUn mécanisme important pour l’internationalisation d’un logiciel repose donc sur cette identification de la culture de l’utilisateur.\n\nEt j’insiste, plus que la langue, on va parler de culture qui va englober la langue, le pays et les conventions culturelles.\n\nCa tombe bien, la plupart des langages informatiques proposent un support de cette notion :\n\nen java, on parle de Locale : http:\u002F\u002Fdocs.oracle.com\u002Fjavase\u002F7\u002Fdocs\u002Fapi\u002Fjava\u002Futil\u002FLocale.html\nen .net, on parle de Culture : http:\u002F\u002Fmsdn.microsoft.com\u002Ffr-fr\u002Flibrary\u002F87k6sx8t%28v=VS.80%29.aspx\nen Python, on parle de Locale : http:\u002F\u002Fdocs.python.org\u002Flibrary\u002Flocale.html\nen PHP, on parle de Locale : http:\u002F\u002Fphp.net\u002Fmanual\u002Ffr\u002Fclass.locale.php\n\nDans la suite de l’article on utilisera indifféremment Culture ou Locale.\n\nPour une application Web\n\nle mécanisme d’identification va se reposer sur un header HTTP : Accept-language. On fera cependant attention à proposer à l’utilisateur un moyen de changer sa Locale car ce header ne suffit pas pour identifier à coup sur la Locale.\n\nNote de 2018 : Ouh la, c’était un chapitre particulièrement trop simpliste ici. Alors oui, on peut se baser dessus mais c’est pas vraiment une bonne pratique. A la limite pour un intranet c’est bon mais si vous avez un site grand public, c’est clairement insuffisant de changer la langue de votre utilisateur uniquement sur la base d’un header et c’est déconseillé d’avoir le même site (les mêmes url) avec des contenus différents selon un header. Côté SEO surtout, les moteurs de recherche souhaitent qu’une url soit toujours associé à une même cible géographique.\n\nDepuis j’ai rédigé un autre article bien plus complet sur l’internationalisation et les noms de domaines.\n\nPour une application lourde\n\nL’identification de la langue de l’utilisateur repose sur les variables d’environnements du système, par exemple la variable LANG sous Unix.\n\nSur Windows, la langue se trouve dans la base de registre, dans HKEY\\_CURRENT\\_USERControlPanelInternationnalLocaleName.\n\nA noter qu’il existe parfois une méthode unifiée quelque soit l’OS pour récupérer la langue sans avoir à se soucier du nom de la variable et de la façon de la lire en fonction de l’OS.\n\nEn Java :\n\nLa langue du système peut être récupéré via la propriété système :  “user.language” mais un simple appel à Locale.getDefault() va renvoyer la locale du poste.\n\nEn C# :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-getculturecsharp-txt\n\nEn Python :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-getdefaultlocale-py\n\nEn PHP :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-getdefaultlocale-php\n\nOk, maintenant que vous avez mis en place cette détection de la culture courante, elle va pouvoir vous servir pour la mise en place des fichiers de langues.\n\nMettre en place des fichiers de langues\n\nAvant de pouvoir localiser, on extrait généralement les chaînes de caractères de l’application dans des fichiers en dehors du code. On sépare ensuite ces fichiers par langues. Un fichier pour le français, un autre pour l’anglais etc... Selon les langages il existe ensuite des mécanismes standardisées afin d’exploiter ces fichiers dans votre application.\n\nLe mécanisme de fallback\n\nCe mécanisme permet d’organiser les ressources hiérarchiquement et de rechercher une traduction en partant du haut de cette hiérarchie jusqu’au plus bas si on ne la trouve pas.\n\nDans l’exemple suivant, l’application a déterminé que l’utilisateur parle Français Canadien. Elle recherche donc d’abord la traduction en Français Canadien, puis en Français si elle n’existe pas, puis enfin dans la langue par défaut si la traduction n’a toujours pas été trouvée.\n\nL’utilisation des codes ISO\n\nUne seconde fonctionnalité très commune consiste à utiliser les codes ISO des pays et des langues pour retrouver le fichier de ressources. Ces codes ISO peuvent être utilisés dans le nom du fichier ou le nom du répertoire.\n\n \n\nLes codes ISO des langues sont disponibles ici :\n\nhttp:\u002F\u002Fwww.loc.gov\u002Fstandards\u002Fiso639-2\u002Fenglangn.html\n\nLes codes ISO des pays sont disponibles ici :\n\nhttp:\u002F\u002Fwww.iso.ch\u002Fiso\u002Fen\u002Fprods-services\u002Fiso3166ma\u002F02iso-3166-code-lists\u002Flist-en1.html\n\n \n\nExemple : fr\\_FR pour le Français de France constitué de FR, code ISO pour la langue Française et FR code ISO pour le pays France.\n\nLes formats de fichier\n\nLe tableau ci-dessous récapitule les formats et mécanismes implémentés dans différents languages.\n\n \n\nLangageFormatMécanisme de fallbackUtilisation des codes ISOJavaResourceBundleOuiOui.NetFichiers ResxOuiOuiPHP ()ICU depuis la 5.3.0ouTableauouPO ()Oui pour ICU et PONon pour les tableauxOui pour ICU et PONon pour les tableauxPythonPO ()OuiOuiC++PO (*)OuiOui\n\n \n\n(\\*) PHP ne proposait pas de mécanisme intégré jusqu’à la version 5.3.0. Désormais il supporte le format ICU et un mécanisme de ResourceBundle. L’utilisation du format ICU reste très peu utilisé à l’heure de la rédaction de ce document. Un technique couramment utilisée consiste à inclure des fichiers PHP à partir de la langue choisi par l’utilisateur. Ces fichiers PHP contenant des tableaux de variables avec les traductions de l’application. Cependant il existe aussi une extension pour utiliser gettext (format PO)  et c’est pourquoi beaucoup d’applications PHP utilise aussi ce format assez répandu.\n\n \n\n(\\\\) Le format PO est celui utilisé par l’outil Gnu gettext. Ce format même lorsqu’il n’est pas supporté nativement par un langage peut souvent être utilisé via une extension.\n\nOn peut donc utiliser ce format en Scala, Java, PHP, Ruby, Python, Javascript, C, C++ etc...\n\n \n\nRajout 2018 : En prenant un peu de recul, ce foisonnement de format n’est pas idéal. Tous ne permettent pas d’internationaliser correctement, je pense notamment au support des formes plurielles (que nous verrons plus bas, à la contextualisation etc...). En 2018 les choses n’ont guère évolué. Nous avons toujours Java qui se garde ses multiples trains de retard avec son API (trop) simpliste, d’autres formats qui sont apparus sur mobile, des formats adaptés aux apps Javascript etc…\n\n \n\nLa mise en oeuvre en dev reste simple cependant :\n\nEn Java :\n\n \n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-getstring-java\n\nEn Python :\n\n \n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-gettext-py\n\nEn Php :\n\nPremière méthode communément utilisé, on stocke les traductions dans des fichiers, un par langue. Le fichier est inclus de la façon suivante :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-requireonce-php\n\nensuite on lit la valeur dans le tableau que l’on sait exister dans ce fichier !\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-readtranslation-php\n\nC’est du bricolage mais cette méthode a été très longtemps utilisé.\n\nSeconde méthode, utilisation de ICU :\n\n \n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-getstring-php\n\nJe reviendrais plus tard sur ces fameux fichiers et leur intégration dans un workflow de développement.\n\nLe formatage des nombres, des devises et des dates\n\nLes nombres et dates ne s’affichent pas de la même façon dans tous les pays, ça aurait été trop simple.\n\nSi par exemple une date s’affiche Jour\u002Fmois\u002Fannée en France, elle s’affichera Mois\u002Fjour\u002FAnnée aux USA.\n\nPour un nombre, l’utilisation de virgules ou de points comme séparateur des milliers ou séparateurs de décimales est aussi lié au pays.\n\nQuelques exemples pour les nombres tiré de la doc Oracle :\n\n\n\nIdem pour l’affichage des montants, on trouvera selon les pays les devises avant ou après le nombre :\n\n \n\n\n\nBref, le foutoir.\n\nHeureusement il existe une méthode standard dans la plupart des langages informatiques qui repose sur la Locale.\n\nAvec la Locale vous laissez le langage choisir comment afficher vos dates, chiffres et montants.\n\n \n\nExemple en Java :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-numberformat-java\n\npour une monnaie\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-numberformatcurrency-java\n\n \n\net pour une date :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-numberformatdate-java\n\nC# :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-formatcurrency-txt\n\net pour une date\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-formatdate-txt\n\nEn Python :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-format-py\n\nEn PHP :\n\nMalheureusement, la notion de Locale n’est pas supporté correctement par les méthodes de formatage en PHP, il faut donc gérer vous même vos formats ou utiliser une librairie externe (méthode recommandée).\n\nEn PHP sans librairies :\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-format-php\n\nOn voit rapidement les limitations de ce système pour avoir une application pleinement internationalisé.\n\nAvec PEAR et le module i18nv2 :\n\n \n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-formatwithpear-php\n\nA noter que Zend propose aussi une API pour l’internationalisation.\n\nNote 2018 : Soyez indulgent, je ne fais plus de PHP depuis 15 ans et je disais sans doute des bêtises en 2010 :)\n\n(j’en dis toujours d’ailleurs)\n\n \n\nAlors ok c’est le foutoir mais là, que vous visiez l’international ou non, vous n’avez aucune excuse de ne pas utiliser les fonctionnalités de votre langage, ça ne coûte pas plus cher de bien faire.\n\nLa gestion des dates\n\nBien plus que leur affichage, la gestion des dates est l’un des sujets les plus pénibles quand on parle d’internationalisation. La grande difficulté réside dans le fait qu’une date est relative à un utilisateur, donc tout traitement qui les manipule, fait des différences de date ou calcule des anniversaires doit prendre en compte la zone temporelle. A cela vous ajoutez les soucis d’heure d’hiver\u002Fété qui ne sont pas identiques partout, les pays qui couvrent plusieurs timezone (et ceux qui ont décidé d’avoir la même heure malgré cela), les secondes intercalaires, les années bisextiles. Envoyer un email pour l’anniversaire d’un utilisateur peut déjà être un sport, calculer le temps d’une de ces communications si vous êtes un acteur téléphonique et que l’utilisateur est en roaming est aussi bien sympathique.\n\nBref, je ne vais pas entrer dans le détail mais le conseil relativement très général c’est surtout d’éviter de ne manipuler une date ou un timestamp sans information de timezone. Et encore plus en base de données, bien stocker la timezone est primordiale et pas juste se baser sur la timezone du serveur qui fait tourner votre base de données (qui peut changer éventuellement ou être mal réglé).\n\nLes images\n\n \n\nLes images ont parfois besoin d’être internationalisé car elles contiennent du texte ou ont des références culturelles qu’il faut pouvoir adapter à un autre pays.\n\n\n\nMalheureusement l’internationalisation d’une image est moins standardisée. Seul C# propose un mécanisme à travers les fichiers resx qui peuvent aussi contenir des images.\n\n \n\nAstuce : On peut cependant utiliser les fichiers de ressources pour stocker les noms des images et ainsi réutiliser le mécanisme standard de localisation pour les images. Par contre ne mélangez pas ces chaînes “techniques” à vos traductions sinon bon courage pour expliquer à vos traducteurs ce qu’il faut faire de ces chaînes de caractère.\n\n \n\nBonne pratique :\n\nLe coût de localisation d’une image étant souvent supérieure à la localisation d’un texte, il est préférable dans la mesure du possible d’éviter l’utilisation d’image avec texte. Il est possible d’ajouter ce texte à la volée via un post traitement de l’image et de mettre en cache les images localisées pour des questions de performance ou parfois d’appliquer le texte en CSS dans le cadre d’une application Web.\n\nla taille des textes à l’écran\n\n \n\nLa taille des textes varie en fonction des écritures. Si le design de votre application est au pixel près, le changement de langues peut avoir des effets dévastateurs.\n\n \n\nLa longueur du texte varie horizontalement : en effet si “anticonstitutionnellement” fait 25 caractères en français, il n’en fera que 17 dans sa traduction allemande (\\*). Sur un formulaire avec le label placé à gauche du champ de saisie l’alignement peut être cassé par un texte trop grand dans une des localisations.\n\nParmi les solutions que l’on peut mettre en place :\n\nPlacer les labels au dessus des champs de saisie\nPrévoir plus de place pour les labels\n\n \n\n(\\*) Et c’est un peu l’exception, de façon générale un texte en allemand prendra plus de place\n\n \n\nLa longueur du texte varie verticalement : certaines langues, comme le Japonais ou le Chinois, vont nécessiter une plus grande taille de police pour être lisible.\n\n \n\nParmi les solutions :\n\nChoisir dès le début une police plus grande pour tous les langages\nLaisser la possibilité à l’utilisateur de choisir d'agrandir sa police\n\n \n\nPour une page web, une bonne pratique consiste à utiliser l’unité em pour le conteneur principal et en % pour les conteneurs en dessous laissant ainsi à l’utilisateur la possibilité de choisir lui-même la taille par son navigateur\n\nPour une application en client lourd, une option doit permettre de choisir la taille de police.\n\nExemple :\n\nIci, splitweet (note 2018 : site qui n’existe plus aujourd’hui) propose une mise en page centrée avec taille fixe en largeur. La police initiale est déjà assez grande et ne change pas en passant au Japonais par contre le div du dessous s'agrandit sans casser le reste de la mise en page.\n\n\n\nMême choix chez Atlassian, la police initiale est assez grande pour ne pas avoir besoin de la changer. La mise en page n’est pas cassée malgré le fait que les paragraphes sont plus petits sur la version Japonaise.\n\nl’affichage LTR (left to right) et RTL (right to left)\n\nSi vous visez un public multilingue très large, alors il vous faut aussi gérer la directivité du langage.\n\nC’est sans doute l’un des aspects de l’internationalisation le plus complexe et beaucoup de sites font l’impasse dessus (par exemple Twitter ou Jira ne proposent pas de langues RTL)\n\nIl existe deux formes d’écriture généralement supporté, l’écriture de droite à gauche et celle de gauche à droite. S’il existe aussi des écritures à directivité verticale, celles-ci acceptent d’être retranscrites en LTR ce qui fait que le support de l’écriture verticale n’est pas nécessaire.\n\nPour une application web\n\nIl existe un attribut pour préciser la directivité d’un élément. Ainsi\n\nhttps:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-htmldirection-html\n\nS’affichera :\n\nשלם\n\net\n\nשלם\n\nEt il existe aussi une propriété css : direction.\n\nMais il ne suffit pas de changer l’alignement des textes, c’est aussi le positionnement des éléments qui est à revoir pour des questions de convention.\n\nL’utilisation de feuilles de style redéfinissant les alignements et positionnement est donc nécessaire mais cela nécessite un énorme travail lors du design de l’application pour supporter deux mises en pages radicalement différentes.\n\nExemple :\n\nFacebook gère bien le passage à l’Arabe. Tous les positionnements sont inversés, y compris la barre d’action.\n\nPour aller plus loin\n\nL’idée n’était pas d’être exhaustive mais vous avez déjà un bon aperçu des problématiques classiques d’internationalisation. Et quand je dis que ce n’est pas exhaustif, je vous laisse méditer sur ces autres sujets :\n\n \n\nle système de mesure : qui peut être métrique ou impérial\nle format d’impression : a4, lettre US etc...\nle système de mesure pour les chaussures et vêtements\nle référencement d’un site web\n",readTime:{text:"19 min read",minutes:18.615,time:1116900,words:3723}},relatedArticles:[],_img:{"/_ipx/_/hugo-nb.jpg":"\u002F_nuxt\u002Fimage\u002Fc3e54c.jpg"}}],fetch:{},mutations:void 0}}("text","element","\n","p","a","nofollow","noopener","noreferrer","_blank","span","font-weight:400;","strong","td","li","true",-1,"icon","icon-link","img","",3,"h3","h4","Oui","ul","em","tr","div","En Python :","PO"," (**)","culture","linternationalisation",2,"L’internationalisation","les-bonnes-pratiques-de-développement","Les bonnes pratiques de développement","lencodage","L’encodage","identifier-la-culture-courante","Identifier la culture courante","mettre-en-place-des-fichiers-de-langues","Mettre en place des fichiers de langues","le-formatage-des-nombres-des-devises-et-des-dates","Le formatage des nombres, des devises et des dates","la-gestion-des-dates","La gestion des dates","les-images","Les images","la-taille-des-textes-à-lécran","la taille des textes à l’écran","laffichage-ltr-left-to-right-et-rtl-right-to-left","l’affichage LTR (left to right) et RTL (right to left)","pour-aller-plus-loin","Pour aller plus loin","h2","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-gistfile1-txt","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-gistfile2-txt","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-jdbcurl-txt","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-csharputf8url-txt","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-mysqlpythonconnection.txt","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-mysqlphpconnection.txt","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-htmlcharset.txt","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-phpheadercharset.txt","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-xmlcharset.txt","http:\u002F\u002Fdocs.oracle.com\u002Fjavase\u002F7\u002Fdocs\u002Fapi\u002Fjava\u002Futil\u002FLocale.html","http:\u002F\u002Fmsdn.microsoft.com\u002Ffr-fr\u002Flibrary\u002F87k6sx8t%28v=VS.80%29.aspx","http:\u002F\u002Fdocs.python.org\u002Flibrary\u002Flocale.html","http:\u002F\u002Fphp.net\u002Fmanual\u002Ffr\u002Fclass.locale.php",".","En Java :","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-getculturecsharp-txt","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-getdefaultlocale-py","En PHP :","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-getdefaultlocale-php","http:\u002F\u002Fwww.loc.gov\u002Fstandards\u002Fiso639-2\u002Fenglangn.html","http:\u002F\u002Fwww.iso.ch\u002Fiso\u002Fen\u002Fprods-services\u002Fiso3166ma\u002F02iso-3166-code-lists\u002Flist-en1.html","ou","Oui pour ICU et PO","Non pour les tableaux","http:\u002F\u002Fwww.gnu.org\u002Fs\u002Fhello\u002Fmanual\u002Fgettext\u002FPO-Files.html","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-getstring-java","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-gettext-py","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-requireonce-php","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-readtranslation-php","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-getstring-php","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-numberformat-java","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-numberformatcurrency-java","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-numberformatdate-java","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-formatcurrency-txt","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-formatdate-txt","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-format-py","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-format-php","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-formatwithpear-php","Exemple :","https:\u002F\u002Fgist.github.com\u002Fhlassiege\u002Fbc14e4cbbb86f5ca6cf4535ea74c73c0#file-htmldirection-html","שלם","2022-05-22T06:36:39.893Z")));