<!DOCTYPE html>
<html lang="fr">
<head><meta charset="utf-8">
<title>Feature branching vs Feature Flipping | EventuallyCoding</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://digianalytics.fr/js/script.js" data-host="https://digianalytics.fr" id="ZwSg9rf6GA" async="" defer="" type="text/javascript"></script>
<meta name="description" content="![](/images/qXMqcos.png)
Je ne sais pas vous mais de mon côté, dans chaque job que j'ai pu faire j'ai toujours retrouvé certains éternels débats. Vou...">
<meta name="og:description" content="![](/images/qXMqcos.png)
Je ne sais pas vous mais de mon côté, dans chaque job que j'ai pu faire j'ai toujours retrouvé certains éternels débats. Vou...">
<meta name="og:type" content="article">
<meta name="og:title" content="Feature branching vs Feature Flipping">
<meta name="og:url" content="https://eventuallycoding.com/2017/09/29/feature-branching-vs-feature-flipping">
<meta name="og:image" content="https://eventuallycoding.com/images/covers/cover4.jpg">
<meta name="og:image:alt" content="Feature branching vs Feature Flipping">
<meta name="twitter:text:title" content="Feature branching vs Feature Flipping">
<meta name="twitter:image" content="https://eventuallycoding.com/images/covers/cover4.jpg">
<meta name="twitter:card" content="summary">
<meta name="article:published_time" content="2017-09-29T00:00:00.000Z">
<meta name="article:article:modified_time" content="2017-09-29T00:00:00.000Z">
<meta name="article:article:tag" content="backend,feature-flipping,ff4j">
<link rel="canonical" href="https://eventuallycoding.com/2017/09/29/feature-branching-vs-feature-flipping">
<link rel="alternate" href="https://eventuallycoding.com/2017/09/29/feature-branching-vs-feature-flipping" hreflang="fr"><link rel="modulepreload" href="/2017/09/29/feature-branching-vs-feature-flipping/_payload.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.ee52eecd.js"><link rel="preload" as="style" href="/_nuxt/entry.edee87b4.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/default.6aa6b804.js"><link rel="preload" as="style" href="/_nuxt/TheHeader.b358b850.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/nuxt-link.aad1d11b.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/siteMetaData.b74feb44.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_id_.bf1a4d3e.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/nuxt-picture.f1ef0045.js"><link rel="preload" as="style" href="/_nuxt/nuxt-picture.19f3d165.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_commonjsHelpers.28e086c5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.1273ed6f.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.eec783d8.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.a6ef77ff.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/query.22d744e8.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/index.61d74bb5.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/utils.23d356f0.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/composables.619e5230.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/HeroSection.379f059f.js"><link rel="preload" as="style" href="/_nuxt/HeroSection.4c50b1af.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.57212973.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseImg.2bd801a1.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseA.3393310d.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseBlockquote.fe90515e.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseStrong.8e6e8d3d.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseUl.e160b1da.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseLi.c6c61789.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/error-component.e1000b00.js"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/github_new.4e3fe23c.svg"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/rss.9e0b880c.svg"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/mastodon.f0ecdde8.svg"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/linkeding.34c3bc6d.svg"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/twitter.457cff27.svg"><link rel="stylesheet" href="/_nuxt/entry.edee87b4.css"><link rel="stylesheet" href="/_nuxt/TheHeader.b358b850.css"><link rel="stylesheet" href="/_nuxt/nuxt-picture.19f3d165.css"><link rel="stylesheet" href="/_nuxt/HeroSection.4c50b1af.css"><style>.inverted[data-v-129d7a9c]{--tw-bg-opacity:1;background-color:rgb(248 250 252/var(--tw-bg-opacity))}.inverted .font-to-invert-to-pink[data-v-129d7a9c]{color:rgb(236 72 153/var(--tw-text-opacity))}.inverted .font-to-invert-to-black[data-v-129d7a9c],.inverted .font-to-invert-to-pink[data-v-129d7a9c]{--tw-text-opacity:1;transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.inverted .font-to-invert-to-black[data-v-129d7a9c]{color:rgb(51 65 85/var(--tw-text-opacity))}.inverted .font-to-invert-to-black[data-v-129d7a9c]:hover{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.link[data-v-129d7a9c]{display:block;font-size:1rem;font-weight:500;line-height:1.5rem;overflow:hidden;padding-left:.75rem;padding-right:.75rem;position:relative;text-decoration:none}.link.NuxtLink-exact-active[data-v-129d7a9c]:after{bottom:-2px;height:100%;left:0;width:100%}.link[data-v-129d7a9c]:after{background:rgba(236,64,122,.25);bottom:-6px;content:"";height:calc(100% - 8px);left:18px;position:absolute;transition:.35s cubic-bezier(.25,.1,0,2.05);width:calc(100% - 8px);z-index:-1}.link[data-v-129d7a9c]:hover:after{bottom:-2px;height:100%;left:0;width:100%}</style><style>.nuxt-content h2{font-size:28px;font-weight:700}.nuxt-content h3{font-size:22px;font-weight:700}.nuxt-content p{margin-bottom:20px}</style></head>
<body ><div id="__nuxt"><!--[--><section class="w-full pb-12 antialiased"><div class="mx-auto max-w-8xl"><div data-v-129d7a9c><nav id="header-menu" class="transition-colors fixed w-full z-10 top-0" data-v-129d7a9c><div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8" data-v-129d7a9c><div class="relative flex items-center justify-between h-16" data-v-129d7a9c><div class="absolute inset-y-0 left-0 flex items-center sm:hidden" data-v-129d7a9c><button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white" aria-controls="mobile-menu" aria-expanded="false" data-v-129d7a9c><span class="sr-only" data-v-129d7a9c>Open main menu</span><svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" data-v-129d7a9c><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" data-v-129d7a9c></path></svg><svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" data-v-129d7a9c><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" data-v-129d7a9c></path></svg></button></div><div class="flex-1 flex items-center justify-center sm:items-stretch sm:justify-start" data-v-129d7a9c><div class="flex-shrink-0 flex items-center" data-v-129d7a9c><span class="text-white text-base font-medium font-bruno text-2xl font-to-invert-to-pink" data-v-129d7a9c><a href="/" class="" data-v-129d7a9c>EventuallyCoding.com</a></span></div><div class="hidden sm:block sm:ml-6 absolute right-0 font-mark" data-v-129d7a9c><div class="flex space-x-4" data-v-129d7a9c><!--[--><a href="/speaking" class="link text-white font-to-invert-to-black" data-v-129d7a9c>Speaking</a><a href="/blog" class="link text-white font-to-invert-to-black" data-v-129d7a9c>Writing</a><a href="/resources" class="link text-white font-to-invert-to-black" data-v-129d7a9c>Resources</a><a href="/about" class="link text-white font-to-invert-to-black" data-v-129d7a9c>About</a><!--]--></div></div></div></div></div><div class="hidden" data-v-129d7a9c><div class="px-2 pt-2 pb-3 space-y-1" data-v-129d7a9c><!--[--><a href="/speaking" class="text-white hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium font-to-invert-to-black" data-v-129d7a9c>Speaking</a><a href="/blog" class="text-white hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium font-to-invert-to-black" data-v-129d7a9c>Writing</a><a href="/resources" class="text-white hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium font-to-invert-to-black" data-v-129d7a9c>Resources</a><a href="/about" class="text-white hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium font-to-invert-to-black" data-v-129d7a9c>About</a><!--]--></div></div></nav></div><!--[--><!--[--><div><section class="flex items-center justify-center h-128 bg-transparent"><canvas id="c" class="-z-10 absolute w-full h-128 block"></canvas><div class="clip-ellipse absolute top-124 rotate-180"></div><!--[--><div class="absolute top-96 w-96 -translate-y-20"><img src="/images/covers/cover4.jpg" alt="Feature branching vs Feature Flipping" class="object-cover"></div><!--]--></section><div class="px-4 mx-auto sm:px-6 xl:max-w-7xl xl:px-0 mt-10"><div><h1 class="text-4xl text-gray-700 font-extrabold text-center mb-5">Feature branching vs Feature Flipping</h1><p class="text-slate-400 text-center mb-5"><!----></p><div class="grid grid-cols-3 text-center sm:w-full md:w-1/2 mx-auto"><div><p class="text-center font-bold my-5 text-slate-400 text-xs"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> September 29, 2017</p></div><div><p class="text-center font-bold my-5 text-slate-400 text-xs"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> 10 min read</p></div><div class="flex items-center font-medium sm:mx-3 justify-center"><img src="/hugo-nb.jpg" loading="lazy" alt="" class="mr-3 w-10 h-10 rounded-full bg-slate-50 dark:bg-slate-800"><div><div class="font-bold text-slate-400 text-xs">Hugo Lassiège</div><a target="_blank" href="https://twitter.com/hugolassiege" class="font-bold text-sky-400 text-xs hover:text-sky-600"> @hugolassiege</a></div></div></div><div class="sm:w-full md:w-1/2 mx-auto"><p class="mt-2 text-xs my-3 flex flex-wrap -m-1 justify-center"><!--[--><a href="/blog?tag=backend" class="m-1 leading-loose text-slate-400 border border-current lowercase px-2 rounded font-medium">#backend</a><a href="/blog?tag=feature-flipping" class="m-1 leading-loose text-slate-400 border border-current lowercase px-2 rounded font-medium">#feature-flipping</a><a href="/blog?tag=ff4j" class="m-1 leading-loose text-slate-400 border border-current lowercase px-2 rounded font-medium">#ff4j</a><!--]--></p></div></div><div class="text-left mx-auto"><div class="flex flex-wrap lg:flex-row-reverse py-12"><!----><div class="w-full px-5 max-w-none centered-image"><div id="nuxtContent" class="prose font-proxima text-sm md:text-xl font-medium min-w-full md:p-10 mx-auto"><p><!--[--><img src="/images/qXMqcos.png" alt><!--]--></p><p><!--[-->Je ne sais pas vous mais de mon côté, dans chaque job que j&#39;ai pu faire j&#39;ai toujours retrouvé certains éternels débats. Vous avez des sujets qui semblent donner des sueurs froides à quasiment tout le monde dans toutes les sociétés. Je pourrais citer : la documentation (interne ou externe), la stratégie de branches, la façon d&#39;estimer des tâches, les conventions de codages etc... etc... etc...<!--]--></p><p><!--[-->En tout début de carrière ces sujets sont passionnants (ou pas), en tout cas vous vous y intéressez puisque la majorité relèvent de l&#39;organisation, la méthode de travail et bon, ça parait plutôt une bonne chose d&#39;être bien organisé.<!--]--></p><p><!--[-->Je vous dévoile un peu la fin du film, au fil du temps, refaire les mêmes débats dans chaque nouvelle équipe vous lasse(ra) un peu. C&#39;est pour cela que bosser sur un produit, qui plus est le sien, pendant plusieurs années est vraiment agréable. Ces sujets ont été taclés et désormais que la tuyauterie est faite on s&#39;occupe de construire des fonctionnalités, chose finalement bien plus agréable. Cela ne veut pas dire qu&#39;on y retouche plus mais le degré de maturité est assez fort pour que chaque changement ne soit pas une révolution mais une amélioration. Toutes les personnes qui enchaînent des projets de durée variant entre 6 mois et 2 ans avec des équipes dont le turnover implique un renouvellement complet tous les 18 mois savent de quoi je parle.<!--]--></p><p><!--[--><a href="http://eventuallycoding.com/wp-content/uploads/2017/09/65220-60709_backdrop_scale_1280xauto1.jpg" rel="nofollow"><!--[--><img src="/images/65220-60709_backdrop_scale_1280xauto1.jpg" alt><!--]--></a> Bref, je tenais donc à partager l&#39;expérience Hopwork sur notre stratégie de branches et où nous en sommes aujourd&#39;hui.<!--]--></p><p><!--[-->Je vais spoiler dès le début cependant avant de rentrer dans le vif du sujet. Pour notre stratégie de branches, on a choisi la méthode la plus simple : le nobranching.<!--]--></p><p><!--[-->Remarquez c&#39;est un peu une ligne de conduite personnelle depuis quelques années, on fait du nosql, avec Lateral-thoughts on avait créé une nossii, et pour les estimations on a suivi le même chemin, on fait du noestimate...<!--]--></p><p><!--[-->Bon mais en pratique cela veut dire quoi ? Non parce qu&#39;à ce stade de ce billet, il y a peut être des gens qui ne savent même pas de quelle branche je parle.<!--]--></p><p><!--[--><a href="http://eventuallycoding.com/wp-content/uploads/2017/09/9cd1d-branch.png" rel="nofollow"><!--[--><img src="/images/9cd1d-branch.png" alt><!--]--></a><!--]--></p><p><!--[-->Déjà revenons aux fondamentaux, qu&#39;est ce qu&#39;une branche et pourquoi en faisons nous ? Quand je parle de branche, je parle de branche de code, c&#39;est à dire une version de votre application construire à partir d&#39;un instant T et qui diverge du code principal. Mettons que le code soit versionné sur git, on dit du code de votre application qui est mis en production et mis à jour tous les jours par l&#39;équipe de développement qu&#39;il est sur une branche de développement appelé master. Cette branche on peut la voir comme une succession de modifications, appelées commits pour les néophytes même si je doute que des néophytes lisent cet article, qui nous amène d&#39;une version A à une version B.<a href="https://eventuallycoding.com/wp-content/uploads/2019/10/1dcb8-history-abc-11.png" rel="nofollow"><!--[--><img src="/images/1dcb8-history-abc-11.png" alt><!--]--></a><!--]--></p><p><!--[-->Et parfois ce développement n&#39;est pas si linéaire que cela, on va créer des ramifications (d&#39;ou le nom de branche) à partir d&#39;un instant T. Ces branches vont donc diverger du code principal puis être refusionné plus tard.<!--]--></p><p><!--[--><a href="http://eventuallycoding.com/wp-content/uploads/2017/09/b8992-sans-titre.jpg" rel="nofollow"><!--[--><img src="/images/b8992-sans-titre.jpg" alt><!--]--></a><!--]--></p><p><!--[-->Pourquoi fait-on cela ? Eh bien il arrive que l&#39;on souhaite isoler le développement d&#39;une fonctionnalité un peu longue dans une branche le temps qu&#39;elle soit prête. On peut aussi souhaiter travailler en isolation des autres développeurs le temps de finir un travail sur plusieurs jours (hyper mauvaise idée en général).<!--]--></p><p><!--[-->Dans certaines sociétés j&#39;ai vu des stratégies de branches plutôt complexe avec des branches dédiées à chaque environnement : dev, intégration, preproduction, prod, des coupes circuits pour des hotfix qui avaient la particularité de partir de la branche de production pour revenir vers la branche de développement et des branches par fonctionnalités (on appellera cela le feature branching).<!--]--></p><p><!--[-->Dès qu&#39;on va commencer à mettre en place des politiques de gestion de branches, on va entrer dans des considérations parfois assez compliqué, par exemple comment mettre en place de l&#39;intégration continue sur chaque branche, y compris les branches temporaires créées au fil d&#39;une seule journée pour des devs spécifiques.<!--]--></p><p><!--[-->Comment s&#39;assurer que ce qui part en production correspond à ce qui été testé ? Ou même comment relire un historique git...<!--]--></p><p><!--[-->Lorsque cela prend des proportions vraiment importantes il arrive qu&#39;une ou plusieurs personnes devienne(nt) un &quot;intégrateur&quot; dont le rôle sera de faire les fusions de branches. J&#39;ai vu des boîtes dont cette corvée était tournante chaque lundi et je vais vous dire, c&#39;était pas une partie de plaisir. Il faut dire que l&#39;outil de gestion de source utilisé n&#39;était pas non plus super adapté pour cela.<!--]--></p><p><!--[-->Je vais pas m&#39;étaler plus sur le sujet, j&#39;ai évidemment un avis subjectif et en réalité il existe sans doute des contextes où c&#39;est nécessaire et des équipes pour lesquelles cela marche très bien. Il existe même des outils qui se sont crées par dessus les outils de gestion de sources pour résoudre certains problèmes évoqués plus haut : <a href="https://danielkummer.github.io/git-flow-cheatsheet/" rel="nofollow"><!--[-->gitflow<!--]--></a>, <a href="https://guides.github.com/introduction/flow" rel="nofollow"><!--[-->githubflow<!--]--></a>, <a href="https://bitbucket.org/yujiewu/hgflow/overview" rel="nofollow"><!--[-->hgflow<!--]--></a> etc...<!--]--></p><p><!--[-->Pour ma part, je suis assez rapidement arrivé a une conclusion qu&#39;il fallait essayer d&#39;éviter de tomber dans ces problématiques. J&#39;appelle cela de la complexité inutile et si on peut s&#39;en passer c&#39;est bien.<!--]--></p><blockquote><!--[--><p><!--[-->La perfection est atteinte, non pas lorsqu&#39;il n&#39;y a plus rien à ajouter, mais lorsqu&#39;il n&#39;y a plus rien à retirer.&quot;<!--]--></p><p><!--[-->Antoine de Saint Exupéry<!--]--></p><!--]--></blockquote><p><!--[-->Dès 2011 j&#39;ai souhaité essayer une nouvelle approche, le feature flipping. Le feature flipping consistant à activer ou désactiver une fonctionnalité avec une interrupteur logiciel plutôt que de la développer dans une branche séparée. C&#39;est l&#39;interrupteur logiciel qui aura la charge d&#39;isoler ce code le temps qu&#39;il soit prêt.<!--]--></p><p><!--[-->En 2011 donc, il s&#39;agissait d&#39;une mission dans une boite que j&#39;ai bien apprécié. La société venait de réaliser une très grosse refonte d&#39;une partie de leur application sur une très longue période (plus d&#39;1 an il me semble) et tout s&#39;est passé sur une branche avec une double maintenance sur la branche principale et des fusions régulières entre les deux. Cela ne s&#39;est pas passé sans difficultés dirons nous et l&#39;atterrissage fut long et douloureux ^^<!--]--></p><p><!--[-->J&#39;avais la chance de rejoindre au tout début un autre projet de refonte tout aussi importante sur une autre partie du site. Et nous sommes cette fois partis du principe que tout se ferait sur la branche principale avec des systèmes de conditions dans le code pour activer ou non le nouveau ou l&#39;ancien code. La refonte était très importante d&#39;une point de vue architecturale, on introduisait de nouvelles briques techniques (moteur de rêgles par exemple), découpage d&#39;un monolithe en plusieurs applis et beaucoup de refactoring.<!--]--></p><p><!--[-->Le nouveau code et l&#39;ancien code était régulièrement mis en production. Des conditions dans le code (de simple if then else) permettait de passer dans l&#39;ancienne application ou la nouvelle. En fonctionnant de la sorte, il est apparu rapidement qu&#39;il était malgré tout possible de mettre en commun certains refactoring ou même d&#39;éprouver du code, qui bien que dormant pouvait avoir des effets de bord en terme de déploiement ou d&#39;opérations. Et cela a eu de nombreux avantages, notamment d&#39;éviter les fameux effets tunnels.<!--]--></p><p><!--[-->Bien sûr que parfois le nouveau code apportait des complications mais, en étant fusionné avec le code de production, la détection de ces problèmes survenait très vite et donc le temps de correction/adaptation était également très rapide. Enfin, les refactoring ont pu aller bien plus loin puisque nous avions moins peur des fusions de code. Bref, je ne vais pas plus loin, c&#39;était une première approche et elle fut très concluante avec de nombreux résultats positifs. Malgré tout il y avait quand même des systèmes de branches complexes entre environnements (intégration, prod, autres parties de l&#39;application etc...) et la pratique restait relativement répandue dans certains cas. De plus le système de conditions avec de simples if pouvait sembler artisanal.<!--]--></p><p><!--[-->Parlons d&#39;Hopwork maintenant. Sur Hopwork nous appliquons cette stratégie &quot;no branching&quot; sur l&#39;application complète. Concrètement, personne ne travaille sur une branche et tout le code est fait sur la branche principale avec la consigne stricte : &quot;<strong><!--[-->on doit pouvoir livrer en production à n&#39;importe quel moment<!--]--></strong>&quot;.<!--]--></p><p><!--[-->Et c&#39;est le cas :<!--]--></p><p><!--[--><img src="/images/DEiapjfWAAAUEey.jpg" alt><!--]--></p><p><!--[-->L&#39;un des outils qui nous aide à faire cela est <a href="http://ff4j.org/" rel="nofollow"><!--[-->ff4j<!--]--></a>. Cette librairie permet de passer d&#39;un système artisanal avec de simples if à un système un peu plus complet :<!--]--></p><ul><!--[--><li><!--[-->paramétrage à chaud des interrupteurs logiciels à activer ou désactiver<!--]--></li><li><!--[-->stockage de l&#39;état en base de données<!--]--></li><li><!--[-->stockage en cache dans Redis pour les performances<!--]--></li><li><!--[-->une console d&#39;administration web<!--]--></li><li><!--[-->des stratégies d&#39;activation avancées qui permettent d&#39;activer pour une population d&#39;utilisateur, par tranche d&#39;ip, par localisation géographique etc...<!--]--></li><!--]--></ul><p><!--[-->Au moment de la rédaction de ce billet nous avons 94 fonctionnalités régie par ff4j et de toute nature : redirection de bots, changement d&#39;interface utilisateur, test AB, nouvel algo de recherche, fonctionnalités admin etc... En dev cela signifie que, en principe, toute fonctionnalité que nous présumons être un peu longue, avoir des impacts ou juste être sortie plus tard se verra associer à un identifiant dans un fichier de features ff4j. Exemple avec la fonctionnalité de détection de visage sur les envois de photos de profil :<!--]--></p><p><!--[-->    &lt;feature uid=&quot;profile-picture-face-check&quot;  description=&quot;Ensure the uploaded profile picture contains at least a face&quot;             enable=&quot;false&quot;/&gt;<!--]--></p><p><!--[-->Le code ensuite fera référence à cette fonctionnalité pour activer ou non une fonctionnalité :<!--]--></p><p><!--[-->if (ff4j.isEnabled(&quot;profile-picture-resolution-check&quot;))<!--]--></p><p><!--[-->... // fais la détection de visage<!--]--></p><p><!--[-->Sur une page jsp de la même facon nous avons une taglib nous permettant d&#39;inclure ou non une portion de jsp :<!--]--></p><p><!--[-->&lt;ff4j:enable featureid=&quot;my-feature&quot;&gt;... &lt;/ff4j:enable&gt;<!--]--></p><p><!--[-->Evidemment il y a tout de même des contraintes.<!--]--></p><p><!--[-->Il faut penser à supprimer le code mort régulièrement lorsqu&#39;on finit par adopter définitivement une nouvelle fonctionnalité et que le ff4j ne sera plus mis en OFF. En bref, il faut faire du ménage. Logique.<!--]--></p><p><!--[-->Il faut constamment penser à créer un code qui cohabite avec l&#39;ancien. Parfois, c&#39;est loin d&#39;être trivial quand on change le modèle de données mais quel confort en cas de retour arrière... Dans les tests, surtout les tests d&#39;interface, il faut penser aux fonctionnalités actives ou non et penser à tester les différents cas. Mais cela reste simple, il suffit d&#39;appeler l&#39;API de FF4J pour activer ou non une fonctionnalité.<!--]--></p><p><!--[-->En comparaison lorsque l&#39;on travaille par branche, il faut établir des stratégies de CI pour lancer les tests sur chaque branche. Et par expérience, les tests d&#39;intégration et de performance sont les principales victimes de cette stratégie car il est assez coûteux de les maintenir par branche. Dès que l&#39;on repose sur des outils externes comme des bases de données, des files de message, ou si ces tests sont lancés la nuit a cause de leur lenteur, on ne s&#39;amuse pas à les dupliquer pour chaque branche. Avec le feature flipping, rien de tout cela.<!--]--></p><p><!--[-->Outre le confort de dev, un retour arrière suite à une mise en prod où une fonctionnalité s&#39;avérerait défectueuse consiste juste à désactiver la fonctionnalité dans l&#39;écran ff4j. Et croyez moi, c&#39;est appréciable. Il est aussi possible de diffuser une nouvelle fonctionnalité en avant première sur une population. Je pense avoir fait un petit tour des avantages que nous y trouvons.<!--]--></p><p><!--[-->Pour l&#39;anecdote en trainant sur un slack tech une fois j&#39;avais assisté à une conversation où je n&#39;ai pas souhaité participer et qui démontait cette pratique. Alors évidemment je ne doute pas que cette stratégie ne fera pas l&#39;unanimité et ce billet n&#39;a pas vocation à vous convaincre. Cette stratégie marche pour nous, c&#39;est tout ce que je peux en dire. Et il y a sans doute des équipes pour qui le Feature Branching marche très bien.<!--]--></p><p><!--[--><a href="http://eventuallycoding.com/wp-content/uploads/2017/09/f5805-featurebranch.jpg" rel="nofollow"><!--[--><img src="/images/f5805-featurebranch.jpg" alt><!--]--></a><!--]--></p><p><!--[-->(Au fait, on met en prod tout les jours, parfois toutes les heures ;))<!--]--></p><p><!--[-->Et si je devais trouver une référence un peu &quot;sérieuse&quot; sur le Feature flipping vs le Feature branching je vous renverrais à cet article de Martin Fowler qui partage la même vision et privilégie cette approche : <a href="https://martinfowler.com/bliki/FeatureBranch.html" rel="nofollow"><!--[-->https://martinfowler.com/bliki/FeatureBranch.html<!--]--></a><!--]--></p><p><!--[-->Alors ca ne donne pas un sceau de crédibilité absolue mais ça a l&#39;avantage de se dire que à la limite, si on se plante, on n&#39;est pas tout seul. Et finalement c&#39;est rassurant. Ou pas :)<!--]--></p><p><!--[-->Autre référence intéressante : <a href="https://devops.com/feature-branching-vs-feature-flags-whats-right-tool-job/" rel="nofollow"><!--[-->https://devops.com/feature-branching-vs-feature-flags-whats-right-tool-job/<!--]--></a><!--]--></p><p><!--[-->Vous pouvez retourner à une activité normale.<!--]--></p></div></div></div></div><hr class="mb-8"><div><span class="font-proxima text-sm md:text-xl font-medium"> Did you like this blog post? </span><div class="mt-4 flex flex-row"><div><a href="https://facebook.com/sharer/sharer.php?u=https://eventuallycoding.com/2017/09/29/feature-branching-vs-feature-flipping" target="_blank" rel="noopener" aria-label="Share on Facebook"><button aria-label="Share on Facebook" type="button" class="text-white bg-[#3b5998] hover:bg-[#3b5998]/90 focus:ring-4 focus:outline-none focus:ring-[#3b5998]/50 font-medium rounded-lg text-sm px-3 py-3 text-center inline-flex items-center dark:focus:ring-[#3b5998]/55 mr-2 mb-2"><svg class="w-6 h-6" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-f" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M279.1 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.4 0 225.4 0c-73.22 0-121.1 44.38-121.1 124.7v70.62H22.89V288h81.39v224h100.2V288z"></path></svg></button></a></div><div><a href="https://twitter.com/share?url=https://eventuallycoding.com/2017/09/29/feature-branching-vs-feature-flipping&amp;text=Feature branching vs Feature Flipping&amp;via=hugolassiege" target="_blank" title="Share on Twitter" rel="noopener noreferrer" aria-label="Share on Twitter"><button aria-label="Share on Twitter" type="button" class="text-white bg-[#1da1f2] hover:bg-[#1da1f2]/90 focus:ring-4 focus:outline-none focus:ring-[#1da1f2]/50 font-medium rounded-lg text-sm px-3 py-3 text-center inline-flex items-center dark:focus:ring-[#1da1f2]/55 mr-2 mb-2"><svg class="w-6 h-6" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"></path></svg></button></a></div><div class=""><a href="https://www.buymeacoffee.com/hlassiege" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-red.png" alt="Buy Me A Coffee" style="height:48px !important;width:209px !important;"></a></div></div></div><div id="hyvor-talk-view"></div><div class="mt-10 -mb-10 grid place-items-center text-slate-600 text-sm font-medium min-w-full mx-auto mb-6 underline"><a href="https://github.com/hlassiege/eventuallycoding/blob/master/content/articles/2017/09/29/feature-branching-vs-feature-flipping.md" rel="noopener noreferrer" target="_blank">Edit on Github/Suggest Modification(s)</a></div></div></div><!--]--><!--]--><footer class="lg:mt-40 border-t border-t-2"><div class="flex flex-col items-center mt-16"><div class="flex mb-3 space-x-4"><a aria-label="Open RSS feed" target="_self" href="/rss.xml" class="text-sm text-gray-500 transition hover:text-gray-600"><img alt="RSS" class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/rss.9e0b880c.svg"></a><a aria-label="Open Mastodon profile" class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="me" href="https://piaille.fr/@hugolassiege"><span class="sr-only">Mastodon</span><img alt="Mastodon" class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/mastodon.f0ecdde8.svg"></a><a aria-label="Open github profile" class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="nofollow noopener noreferrer" href="https://github.com/hlassiege"><span class="sr-only">github</span><img alt="github" class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/github_new.4e3fe23c.svg"></a><a aria-label="Open linkedin profile" class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/hugolassiege/"><span class="sr-only">Linkedin</span><img alt="Linkedin" class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/linkeding.34c3bc6d.svg"></a><a aria-label="Open twitter profile" target="_blank" rel="nofollow noopener noreferrer" href="https://twitter.com/hugolassiege" class="text-sm text-gray-500 transition hover:text-gray-600"><img alt="Twitter" class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/twitter.457cff27.svg"></a></div><div class="flex mb-2 space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Copyright © 2023</div><div>•</div> EventuallyCoding - A la fin de l&#39;envoi, je code !</div><div class="text-sm text-gray-500"> Credits to www.freepik.com - <a href="https://www.freepik.com/vectors/citizen">Citizen vector created by freepik - </a><a href="https://www.freepik.com/vectors/css">Css vector created by vectorjuice</a></div></div></footer></div></section><!--]--></div><script type="module">import p from "/2017/09/29/feature-branching-vs-feature-flipping/_payload.js";window.__NUXT__={...p,...((function(a,b){return {state:{},_errors:{},serverRendered:true,config:{public:{content:{locales:[],defaultLocale:b,integrity:1677106025717,experimental:{stripQueryParameters:a,clientDB:a},api:{baseURL:"\u002Fapi\u002F_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:a,wsUrl:b,documentDriven:a,host:b,trailingSlash:a,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"\u002F",buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:b}},prerenderedAt:1677106057479}}(false,"")))}</script><script type="module" src="/_nuxt/entry.ee52eecd.js" crossorigin></script><script type="module" src="/_nuxt/default.6aa6b804.js" crossorigin></script><script type="module" src="/_nuxt/_id_.bf1a4d3e.js" crossorigin></script><script type="module" src="/_nuxt/ContentRenderer.1273ed6f.js" crossorigin></script><script type="module" src="/_nuxt/ContentRendererMarkdown.eec783d8.js" crossorigin></script><script type="module" src="/_nuxt/ProseP.57212973.js" crossorigin></script><script type="module" src="/_nuxt/ProseImg.2bd801a1.js" crossorigin></script><script type="module" src="/_nuxt/ProseA.3393310d.js" crossorigin></script><script type="module" src="/_nuxt/ProseBlockquote.fe90515e.js" crossorigin></script><script type="module" src="/_nuxt/ProseStrong.8e6e8d3d.js" crossorigin></script><script type="module" src="/_nuxt/ProseUl.e160b1da.js" crossorigin></script><script type="module" src="/_nuxt/ProseLi.c6c61789.js" crossorigin></script></body>
</html>