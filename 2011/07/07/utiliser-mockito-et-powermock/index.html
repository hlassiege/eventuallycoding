<!DOCTYPE html>
<html data-head-attrs="">
<head><title>Utiliser Mockito et PowerMock | EventuallyCoding</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><script src="https://digianalytics.fr/js/script.js" data-host="https://digianalytics.fr" data-dnt="false" id="ZwSg9rf6GA" async defer type="text/javascript"></script><meta name="description" content="[![](/images/mockito.jpg &quot;mockito&quot;)](http://eventuallycoding.com/wp-content/uploads/2011/07/mockito.jpg)Vous connaissez peut-être déjà [Mockito](http:..."><meta name="og:description" content="[![](/images/mockito.jpg &quot;mockito&quot;)](http://eventuallycoding.com/wp-content/uploads/2011/07/mockito.jpg)Vous connaissez peut-être déjà [Mockito](http:..."><meta name="og:type" content="article"><meta name="og:title" content="Utiliser Mockito et PowerMock"><meta name="og:url" content="https://eventuallycoding.com/2011/07/07/utiliser-mockito-et-powermock"><meta name="og:image" content="https://eventuallycoding.com/images/covers/cover2.jpg"><meta name="og:image:alt" content="Utiliser Mockito et PowerMock"><meta name="twitter:text:title" content="Utiliser Mockito et PowerMock"><meta name="twitter:image" content="https://eventuallycoding.com/images/covers/cover2.jpg"><meta name="twitter:card" content="summary"><meta name="article:published_time" content="2011-07-07T00:00:00.000Z"><meta name="article:article:modified_time" content="2011-07-07T00:00:00.000Z"><meta name="article:article:tag" content="java,mockito,powermock,testunitaire"><link rel="canonical" href="https://eventuallycoding.com/2011/07/07/utiliser-mockito-et-powermock"><meta name="head:count" content="17"><link rel="modulepreload" href="/2011/07/07/utiliser-mockito-et-powermock/_payload.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/entry.1f061433.js"><link rel="preload" as="style" href="/_nuxt/entry.2fb37f22.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/default.6d027c12.js"><link rel="preload" as="style" href="/_nuxt/TheHeader.19f98060.css"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/TheHeader.11512ce7.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/TheFooter.e758e308.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/siteMetaData.bb10a390.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/github_new.c6ffbd0b.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_id_.9c932153.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/PageSidebar.7eecb4f1.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/Dropdown.5bf5f9c4.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/_commonjsHelpers.f8a6f4fc.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRenderer.56de4234.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ContentRendererMarkdown.7b66e39b.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/BlogCard.vue_vue_type_script_setup_true_lang.b5c60239.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/asyncData.5f49fea1.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/query.58444dfd.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/utils.1b9302a0.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/HeroSection.78eade73.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseP.d6638831.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseA.80716a9a.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseImg.4589e1a4.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseH3.bfc02e33.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseOl.daf18803.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseLi.dad5ca06.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseUl.62658379.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseStrong.063b5b24.js"><link rel="modulepreload" as="script" crossorigin href="/_nuxt/ProseEm.938d2e90.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/web-socket.c2e1c077.js"><link rel="prefetch" as="script" crossorigin href="/_nuxt/error-component.84466c0c.js"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/rss.9e0b880c.svg"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/mastodon.f0ecdde8.svg"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/linkeding.34c3bc6d.svg"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/twitter.457cff27.svg"><link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/github_new.4e3fe23c.svg"><link rel="stylesheet" href="/_nuxt/entry.2fb37f22.css"><link rel="stylesheet" href="/_nuxt/TheHeader.19f98060.css"><style>.nuxt-content h2{font-size:28px;font-weight:700}.nuxt-content h3{font-size:22px;font-weight:700}.nuxt-content p{margin-bottom:20px}</style><style>.nuxt-content h2{font-size:28px;font-weight:700}.nuxt-content h3{font-size:22px;font-weight:700}.nuxt-content p{margin-bottom:20px}.clip-ellipse{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity));-webkit-clip-path:ellipse(60% 100% at 50% 0);clip-path:ellipse(60% 100% at 50% 0);height:100px;width:100%}</style></head>
<body data-head-attrs=""><div id="__nuxt"><!--[--><section class="w-full pb-12 antialiased"><div class="mx-auto max-w-8xl"><div data-v-b5718d32><nav class="transition-colors fixed w-full z-10 top-0" id="header-menu" data-v-b5718d32><div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8" data-v-b5718d32><div class="relative flex items-center justify-between h-16" data-v-b5718d32><div class="absolute inset-y-0 left-0 flex items-center sm:hidden" data-v-b5718d32><button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white" aria-controls="mobile-menu" aria-expanded="false" data-v-b5718d32><span class="sr-only" data-v-b5718d32>Open main menu</span><svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" data-v-b5718d32><path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" data-v-b5718d32></path></svg><svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" data-v-b5718d32><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" data-v-b5718d32></path></svg></button></div><div class="flex-1 flex items-center justify-center sm:items-stretch sm:justify-start" data-v-b5718d32><div class="flex-shrink-0 flex items-center" data-v-b5718d32><span class="text-white text-base font-medium font-bruno text-2xl font-to-invert-to-pink" data-v-b5718d32> EventuallyCoding.com </span></div><div class="hidden sm:block sm:ml-6 absolute right-0" data-v-b5718d32><div class="flex space-x-4" data-v-b5718d32><!--[--><a href="/" class="link text-white font-to-invert-to-black" data-v-b5718d32>Home</a><a href="/blog" class="link text-white font-to-invert-to-black" data-v-b5718d32>Blog</a><a href="/resources" class="link text-white font-to-invert-to-black" data-v-b5718d32>Resources</a><!--]--></div></div></div></div></div><div class="hidden" data-v-b5718d32><div class="px-2 pt-2 pb-3 space-y-1" data-v-b5718d32><!--[--><a href="/" class="text-white hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium font-to-invert-to-black" data-v-b5718d32>Home</a><a href="/blog" class="text-white hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium font-to-invert-to-black" data-v-b5718d32>Blog</a><a href="/resources" class="text-white hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium font-to-invert-to-black" data-v-b5718d32>Resources</a><!--]--></div></div></nav></div><!--[--><!--[--><div><section class="flex items-center justify-center h-128 bg-transparent"><canvas id="c" class="-z-10 absolute w-full h-128 block"></canvas><div class="clip-ellipse absolute top-124 rotate-180"></div><!--[--><div class="absolute top-96 w-96 -translate-y-20"><img src="/images/covers/cover2.jpg" alt="Utiliser Mockito et PowerMock" class="object-cover"></div><!--]--></section><div class="px-4 mx-auto sm:px-6 xl:max-w-7xl xl:px-0 mt-10"><h1 class="text-4xl text-gray-700 font-extrabold mb-10 text-center">Utiliser Mockito et PowerMock</h1><div class="grid grid-cols-3 text-center sm:w-full md:w-1/2 mx-auto"><div><p class="text-center font-bold my-5 text-slate-400 text-xs"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> July 7, 2011</p></div><div><p class="text-center font-bold my-5 text-slate-400 text-xs"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> 5 min read</p></div><div class="flex items-center font-medium sm:mx-3 justify-center"><img src="/hugo-nb.jpg" loading="lazy" alt="" class="mr-3 w-10 h-10 rounded-full bg-slate-50 dark:bg-slate-800"><div><div class="font-bold text-slate-400 text-xs">Hugo Lassiège</div><a target="_blank" href="https://twitter.com/hugolassiege" class="font-bold text-sky-400 text-xs hover:text-sky-600"> @hugolassiege</a></div></div></div><div class="sm:w-full md:w-1/2 mx-auto"><p class="mt-2 text-xs my-3 flex flex-wrap -m-1 justify-center"><!--[--><a href="/blog?tag=java" class="m-1 leading-loose text-slate-400 border border-current lowercase px-2 rounded font-medium">#java</a><a href="/blog?tag=mockito" class="m-1 leading-loose text-slate-400 border border-current lowercase px-2 rounded font-medium">#mockito</a><a href="/blog?tag=powermock" class="m-1 leading-loose text-slate-400 border border-current lowercase px-2 rounded font-medium">#powermock</a><a href="/blog?tag=testunitaire" class="m-1 leading-loose text-slate-400 border border-current lowercase px-2 rounded font-medium">#testunitaire</a><!--]--></p></div><div class="text-left mx-auto"><div class="flex flex-wrap lg:flex-row-reverse py-12"><div class="w-full lg:w-1/4 px-5"><div class="lg:sticky top-0 pt-5 -mt-5"><div class="toc hidden lg:block"><h3 class="border-b-4 pb-3 mb-3 border-gray-200 text-xl">On this page</h3><ul class="pl-0"><!--[--><li class="ml-4 py-1"><a class="text-shark-400 hover:text-smalt-blue-700" href="#mais-cest-quoi-mockito-">Mais c&#39;est quoi Mockito ?</a></li><li class="ml-4 py-1"><a class="text-shark-400 hover:text-smalt-blue-700" href="#et-pourquoi-mockito-">Et pourquoi Mockito ?</a></li><li class="ml-4 py-1"><a class="text-shark-400 hover:text-smalt-blue-700" href="#et-pourquoi-powermock-">Et pourquoi Powermock ?</a></li><li class="ml-4 py-1"><a class="text-shark-400 hover:text-smalt-blue-700" href="#mais-revenons-aux-fondamentaux-pourquoi-utiliser-des-mocks-">Mais revenons aux fondamentaux, pourquoi utiliser des mocks ?</a></li><li class="ml-4 py-1"><a class="text-shark-400 hover:text-smalt-blue-700" href="#passons-à-la-pratique">Passons à la pratique</a></li><li class="ml-4 py-1"><a class="text-shark-400 hover:text-smalt-blue-700" href="#gérer-les-attributs-privés-sans-setters-">Gérer les attributs privés sans setters !</a></li><li class="ml-4 py-1"><a class="text-shark-400 hover:text-smalt-blue-700" href="#mocker-une-méthode-statique">Mocker une méthode statique</a></li><!--]--></ul></div><div class="text-right mb-12"><div class="relative inline-block text-left ml-2 block lg:hidden"><div><span class="rounded-md shadow-sm"><button type="button" class="inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-sm leading-5 font-medium text-black hover:text-white hover:bg-smalt-blue-500 focus:outline-none transition ease-in-out duration-150" aria-haspopup="true" aria-expanded="true"><!--[-->On this page<!--]--><svg class="-mr-1 ml-2 h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></span></div><!----></div></div></div></div><div class="lg:w-3/4 w-full px-5 max-w-none centered-image"><div id="nuxtContent" class="prose font-proxima text-sm md:text-xl font-medium min-w-full md:p-10 mx-auto"><p><!--[--><a href="http://eventuallycoding.com/wp-content/uploads/2011/07/mockito.jpg" rel="nofollow"><!--[--><img src="/images/mockito.jpg" alt title="mockito"><!--]--></a>Vous connaissez peut-être déjà <a href="http://mockito.org/" rel="nofollow"><!--[-->Mockito<!--]--></a> ? En fait vous connaissez même surement pour ceux qui ont eu la chance d&#39;être présent à la <a href="http://jduchess.org/duchess-france/blog/marmite-soiree-crumble-pour-la-premiere-edition/" rel="nofollow"><!--[-->première soirée Marmite des JDuchess<!--]--></a>.<!--]--></p><p><!--[-->Et pourquoi j&#39;en parle ? Bon, pas seulement parce que leur logo est un mojito géant et que j&#39;adore cette boisson (*), mais tout simplement pour présenter quelques astuces d&#39;utilisation avec PowerMock.<!--]--></p><p><!--[-->* inconsciemment ca doit jouer un peu quand même<!--]--></p><h3 id="mais-cest-quoi-mockito-"><a href="#mais-cest-quoi-mockito-"><!--[-->Mais c&#39;est quoi Mockito ?<!--]--></a></h3><p><!--[-->Petit retour aux sources, selon <a href="http://mockito.org/" rel="nofollow"><!--[-->le site officiel<!--]--></a> : &quot;Mockito is a mocking framework that tastes really good.&quot;<!--]--></p><h3 id="et-pourquoi-mockito-"><a href="#et-pourquoi-mockito-"><!--[-->Et pourquoi Mockito ?<!--]--></a></h3><ol><!--[--><li><!--[-->Parce que son API utilise un DSL agréable à utiliser, lisible, typé :<br>when(mockedList.get(0)).thenReturn(&quot;first&quot;);
when(mockedList.get(2)).thenThrow(new ArrayOutOfBoundException());<!--]--></li><li><!--[-->Pas de record-replay obligatoire<!--]--></li><!--]--></ol><p><!--[-->Ca c&#39;est pour ceux qui connaissent EasyMock, pas besoin de préciser le comportement attendu de votre mock dans ses moindres détails. On se focalise juste sur le resultat produit par l&#39;objet testé, pas sur sa facon d&#39;utiliser le mock. (A noter que EasyMock permet désormais de créer des mocks sans nécessité de préciser son comportement avec createNiceMock)<!--]--></p><h3 id="et-pourquoi-powermock-"><a href="#et-pourquoi-powermock-"><!--[-->Et pourquoi Powermock ?<!--]--></a></h3><p><!--[-->Parce que Mockito tout seul ne permet pas de gérer quelques cas sur du code &quot;intestable&quot;. Et ce que j&#39;appelle intestable, alors ça, je suis sur que vous en avez déjà vu (ou alors vous avez une veine incroyable et je veux savoir où vous travaillez !) :<!--]--></p><ul><!--[--><li><!--[-->des méthodes statiques de partout (getInstance, Lookup, etc...)<!--]--></li><li><!--[-->des blocs statiques<!--]--></li><li><!--[-->un constructeur qui fait papa-maman (j&#39;adore cette expression...)<!--]--></li><!--]--></ul><p><!--[-->Pour info, vous avez déjà un bon article sur le sujet mais concernant JMockit : <a href="http://fchabanois.developpez.com/tutorial/java/jmockit/" rel="nofollow"><!--[-->http://fchabanois.developpez.com/tutorial/java/jmockit/<!--]--></a><!--]--></p><h3 id="mais-revenons-aux-fondamentaux-pourquoi-utiliser-des-mocks-"><a href="#mais-revenons-aux-fondamentaux-pourquoi-utiliser-des-mocks-"><!--[-->Mais revenons aux fondamentaux, pourquoi utiliser des mocks ?<!--]--></a></h3><p><!--[-->Tout simplement parce que quand on parle de test unitaire, on fait référence à des tests <strong><!--[-->UNITAIRES<!--]--></strong> ! Et tester unitairement un objet ça veut dire le tester en isolation, donc pas d&#39;appel à une base de données, à une file de messages etc... Dans l&#39;idéal, un test unitaire ne teste qu&#39;une seule classe. On utilise d&#39;ailleurs une convention simple et assez parlante pour cela : MonObjet est testé par MonObjetTest (ou TestMonObjet).<!--]--></p><p><!--[--><em><!--[-->Point personnel, sur ce dernier point, je suis plus coulant. Un test reste unitaire du moment que je n&#39;utilise pas de ressources externes (base de données etc...) mais j&#39;accepte l&#39;utilisation d&#39;autre classes du moment que je maitrise leurs propres interactions.<!--]--></em><!--]--></p><p><!--[-->Et donc pour tester en isolation nous allons avoir besoin des fausses implémentations de toutes les dépendances de notre objet. Nous pourrions les écrire toutes, en admettant que chaque dépendance soit utilisé via une interface mais ce serait très fastidieux. Utiliser une librairie de mock permettra donc d&#39;éviter une tâche bien pénible.<!--]--></p><h3 id="passons-à-la-pratique"><a href="#passons-à-la-pratique"><!--[-->Passons à la pratique<!--]--></a></h3><p><!--[-->Mockito est fourni avec runner Junit que l&#39;on peut activer comme suit :<!--]--></p><p><!--[-->@RunWith(MockitoJUnitRunner.class)
public class TestMyObjet
{
@InjectMocks
private MyObject myObjet = new MyObject();<!--]--></p><p><!--[-->@Mock
private MyComplexObject myComplexObject;<!--]--></p><p><!--[-->@Mock
private IMyComplexInterface anotherComplexObject ;
...
}<!--]--></p><p><!--[-->Première bonne nouvelle, en utilisant l&#39;annotation <strong><!--[-->@Mock<!--]--></strong>, le runner Mockito va créer pour vous tout les mocks qui sont déclarés que ce soit des interfaces ou des classes.<!--]--></p><h3 id="gérer-les-attributs-privés-sans-setters-"><a href="#gérer-les-attributs-privés-sans-setters-"><!--[-->Gérer les attributs privés sans setters !<!--]--></a></h3><p><!--[-->Là ou le runner est encore plus fort, c&#39;est qu&#39;il va injecter tout les mocks nécessaires sur l&#39;objet annoté par <strong><!--[-->@InjectMocks<!--]--></strong>. Et là c&#39;est très pratique, surtout si vous avez du code sans setter.<!--]--></p><p><!--[-->public class MyObjet
{
...
@Autowired
private MyComplexObjet myComplexObjet;
...<!--]--></p><p><!--[-->myComplexObjet est privé et n&#39;a aucun setter, donc sans le runner Mockito vous ne pourriez pas l&#39;injecter.<!--]--></p><p><!--[-->Bon en fait, si comme nous allons le voir.<!--]--></p><p><!--[-->D&#39;ailleurs dans le cas suivant Mockito ne vous sera d&#39;aucune aide et du coup nous allons quand même avoir recours à des ruses de sioux :<!--]--></p><p><!--[-->public class MyObjet
{
@Value(&quot;${onekey}&quot;)
private String onekey;
@Value(&quot;${anotherkey}&quot;)
private String anotherkey;
...
}<!--]--></p><p><!--[-->Dans ce cas, vous pouvez utiliser Spring à la rescousse et <strong><!--[-->ReflectionTestUtils<!--]--></strong> :<!--]--></p><p><!--[-->@Before
public void initialize ()
{
ReflectionTestUtils.setField(myObject, &quot;onekey&quot;, &quot;one&quot;);
ReflectionTestUtils.setField(myObject, &quot;anotherkey&quot;, &quot;two&quot;);
}<!--]--></p><p><!--[-->C&#39;est pas du Mockito mais ça valait le coup d&#39;être cité.<!--]--></p><h3 id="mocker-une-méthode-statique"><a href="#mocker-une-méthode-statique"><!--[-->Mocker une méthode statique<!--]--></a></h3><p><!--[-->En fait Mockito n&#39;est pas capable de mocker une méthode statique par lui même. Pour cela il va falloir appeler <a href="http://code.google.com/p/powermock/" rel="nofollow"><!--[-->PowerMock<!--]--></a> à la rescousse.<!--]--></p><p><!--[-->Pour l&#39;activer, vous allez désormais utiliser un autre runner : <strong><!--[-->PowerMockRunner<!--]--></strong>.<!--]--></p><p><!--[-->@RunWith(PowerMockRunner.class)
@PrepareForTest({ Lookup.class })
@PowerMockIgnore(&quot;org.apache.commons.logging.*&quot;)
public class TestMyObject
{
...
@Before
public void initialize() throws Exception
{
// Comme vous n&#39;utilisez pas MockitoRunner, vous devez faire appel à initMocks pour initialiser vos mocks
MockitoAnnotations.initMocks(this);
...
// o utilise PowerMockito pour mocker l&#39;appel statique à Lookup.getInstance()
// -------------------------------------------------------------------
PowerMockito.mockStatic(Lookup.class);
Lookup lookup = mock(Lookup.class);
when(Lookup.getInstance()).thenReturn(lookup);
...
}<!--]--></p><p><!--[-->Explications de texte :<!--]--></p><p><!--[-->Activation du runner :<!--]--></p><p><!--[-->@RunWith(PowerMockRunner.class)<!--]--></p><p><!--[-->Liste des objets dont on va faire un mock de méthode statiques :<!--]--></p><p><!--[-->@PrepareForTest({ Lookup.class })<!--]--></p><p><!--[-->La ligne suivante est nécessaire car on n&#39;utilise plus le runner <strong><!--[-->MockitoJUnitRunner<!--]--></strong> mais que l&#39;on souhaite quand même utiliser les annotations <strong><!--[-->Mocks<!--]--></strong> et <strong><!--[-->InjectMocks<!--]--></strong><!--]--></p><p><!--[-->MockitoAnnotations.initMocks(this);<!--]--></p><p><!--[-->et enfin, le mock de la méthode statique :<!--]--></p><p><!--[-->PowerMockito.mockStatic(Lookup.class);
Lookup lookup = mock(Lookup.class);
when(Lookup.getInstance()).thenReturn(lookup );<!--]--></p><p><!--[-->Facile non ?<!--]--></p><p><!--[-->Allez, une petite dernière pour la route. Et si mon objet doit implémenter deux interfaces ? Par exemple j&#39;utilise Carbon pour l&#39;injection de dépendance (ok on sent le projet legacy là) et du coup tout mes beans doivent aussi implémenter l&#39;interface Component.<!--]--></p><p><!--[-->Ouf, Mockito le gère depuis 2009 :<!--]--></p><p><!--[-->mock(Lookup.class, withSettings().extraInterfaces(Component.class));<!--]--></p><p><!--[-->Voila, vous en savez (peut-être) un peu plus sur Mockito, à vous de jouer maintenant !<!--]--></p></div></div></div></div><hr class="mb-12"><div><span> Partager sur : </span><div class="mt-4"><a href="https://facebook.com/sharer/sharer.php?u=https://eventuallycoding.com/2011/07/07/utiliser-mockito-et-powermock" target="_blank" rel="noopener" aria-label=""><button type="button" class="text-white bg-[#3b5998] hover:bg-[#3b5998]/90 focus:ring-4 focus:outline-none focus:ring-[#3b5998]/50 font-medium rounded-lg text-sm px-3 py-3 text-center inline-flex items-center dark:focus:ring-[#3b5998]/55 mr-2 mb-2"><svg class="w-6 h-6" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-f" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M279.1 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.4 0 225.4 0c-73.22 0-121.1 44.38-121.1 124.7v70.62H22.89V288h81.39v224h100.2V288z"></path></svg></button></a><a href="https://twitter.com/share?url=https://eventuallycoding.com/2011/07/07/utiliser-mockito-et-powermock&amp;text=Utiliser Mockito et PowerMock&amp;via=hugolassiege" target="_blank" title="Share on Twitter" rel="noopener noreferrer"><button type="button" class="text-white bg-[#1da1f2] hover:bg-[#1da1f2]/90 focus:ring-4 focus:outline-none focus:ring-[#1da1f2]/50 font-medium rounded-lg text-sm px-3 py-3 text-center inline-flex items-center dark:focus:ring-[#1da1f2]/55 mr-2 mb-2"><svg class="w-6 h-6" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"></path></svg></button></a></div></div><!----><div id="hyvor-talk-view"></div></div></div><!--]--><!--]--><footer class="lg:mt-52 border-t border-t-2"><div class="flex flex-col items-center mt-16"><div class="flex mb-3 space-x-4"><a target="_self" href="/rss.xml" class="text-sm text-gray-500 transition hover:text-gray-600"><img class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/rss.9e0b880c.svg"></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="me" href="https://piaille.fr/@hugolassiege"><span class="sr-only">Mastodon</span><img class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/mastodon.f0ecdde8.svg"></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="nofollow noopener noreferrer" href="https://github.com/hlassiege"><span class="sr-only">github</span><img class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/github_new.4e3fe23c.svg"></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/hugolassiege/"><span class="sr-only">Linkedin</span><img class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/linkeding.34c3bc6d.svg"></a><a target="_blank" rel="nofollow noopener noreferrer" href="https://twitter.com/hugolassiege" class="text-sm text-gray-500 transition hover:text-gray-600"><img class="transition-transform hover:scale-110 w-8 h-8" src="/_nuxt/twitter.457cff27.svg"></a></div><div class="flex mb-2 space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Copyright © 2023</div><div>•</div> EventuallyCoding - A la fin de l&#39;envoi, je code !</div><div class="text-sm text-gray-500">Credits to www.freepik.com - <a href="https://www.freepik.com/vectors/citizen">Citizen vector created by freepik - </a><a href="https://www.freepik.com/vectors/css">Css vector created by vectorjuice</a></div></div></footer></div></section><!--]--></div><script type="module">import p from "/2011/07/07/utiliser-mockito-et-powermock/_payload.js";window.__NUXT__={...p,...((function(a,b){return {state:{},_errors:{},serverRendered:true,config:{public:{content:{clientDB:{isSPA:a,integrity:1672654298662},navigation:{fields:[]},base:"_content",tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"prose-code",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:a,wsUrl:b,documentDriven:a,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"\u002F",buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:b}},prerenderedAt:1672654343125}}(false,"")))}</script><script type="module" src="/_nuxt/entry.1f061433.js" crossorigin></script><script type="module" src="/_nuxt/default.6d027c12.js" crossorigin></script><script type="module" src="/_nuxt/TheHeader.11512ce7.js" crossorigin></script><script type="module" src="/_nuxt/_id_.9c932153.js" crossorigin></script><script type="module" src="/_nuxt/TheFooter.e758e308.js" crossorigin></script><script type="module" src="/_nuxt/HeroSection.78eade73.js" crossorigin></script><script type="module" src="/_nuxt/PageSidebar.7eecb4f1.js" crossorigin></script><script type="module" src="/_nuxt/Dropdown.5bf5f9c4.js" crossorigin></script><script type="module" src="/_nuxt/ContentRenderer.56de4234.js" crossorigin></script><script type="module" src="/_nuxt/ContentRendererMarkdown.7b66e39b.js" crossorigin></script><script type="module" src="/_nuxt/ProseP.d6638831.js" crossorigin></script><script type="module" src="/_nuxt/ProseA.80716a9a.js" crossorigin></script><script type="module" src="/_nuxt/ProseImg.4589e1a4.js" crossorigin></script><script type="module" src="/_nuxt/ProseH3.bfc02e33.js" crossorigin></script><script type="module" src="/_nuxt/ProseOl.daf18803.js" crossorigin></script><script type="module" src="/_nuxt/ProseLi.dad5ca06.js" crossorigin></script><script type="module" src="/_nuxt/ProseUl.62658379.js" crossorigin></script><script type="module" src="/_nuxt/ProseStrong.063b5b24.js" crossorigin></script><script type="module" src="/_nuxt/ProseEm.938d2e90.js" crossorigin></script></body>
</html>